{"version":3,"sources":["assets/images/S.jpg","utils/general-utils.js","utils/excell-utils.js","components/MsgToShow.js","components/Dropzone.js","utils/date-utils.js","utils/local-db.js","Firebase/Firestore.js","Firebase/Firebase.js","utils/getColumns.js","utils/createRowData.js","components/TableTabScene.js","components/AssignmentDialog.js","components/EnhancedTable.js","components/GenericTab.js","components/Select.js","utils/Upload.js","Scenes/ReportsTabScene.js","Scenes/MainScene.js","App.js","serviceWorker.js","index.js","assets/images/tamir_logoshakuf.png"],"names":["module","exports","entriesToObj","entries","reduce","prev","curr","key","val","checkIfAllFieldsHaveValue","fields","obj","hasValue","filter","field","length","removeEmptyFields","Object","openFile","inputFile","fileReader","FileReader","Promise","resolve","reject","onerror","abort","onload","fileName","name","result","readAsArrayBuffer","fileToAOA","res","worksheet","XLSX","read","Uint8Array","type","SheetNames","forEach","sheetName","roa","utils","sheet_to_json","Sheets","header","push","aoa","aoaToFile","workbook","book_new","set_right_to_left","sheet","aoa_to_sheet","book_append_sheet","writeFile","wb","Workbook","Views","RTL","useStyles","makeStyles","theme","title","textAlign","fontSize","MsgToShow","body","visible","handleClose","classes","_handleClose","Dialog","disableBackdropClick","disableEscapeKeyDown","open","onClose","aria-labelledby","aria-describedby","DialogTitle","id","className","DialogContent","DialogContentText","DialogActions","Button","onClick","color","Dropzone","onGetFile","useState","msgState","setMsgState","onDrop","useCallback","acceptedFiles","files","openPromises","map","all","then","openedFiles","aoaoa","aoas","subArray","subArrayValue","concatAll","x","undefined","filesToAOAs","useDropzone","getRootProps","getInputProps","isDragActive","style","display","justifyContent","marginTop","src","width","height","alignSelf","toMoment","date","Date","moment","toDate","totalHoursWorked","attendanceDays","endTime","startTime","start","end","startMoment","endMoment","diff","duration","asHours","diffInHours","acc","addOwners","myRole","myUid","myOwners","roleOfUserToAdd","userToAdd","role","substr","owners","studentStatus","uid","firestoreDb","collections","students","users","getStudents","collection","getSpecificStudent","studentId","doc","getSpecificUser","Uid","getUsers","deleteStudent","delete","deleteUser","userId","getAttendance","tutorUIDs","month","firstOfMonth","getFullYear","getMonth","lastOfMonth","getDate","tutorUID","where","get","snapshot","docs","flatMap","data","shifts","getModule","firebase","firestore","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","firestoreModule","firestoreModuleInit","BirthDayEditor","props","handleChangeComplete","event","setState","dob","target","value","onCommit","state","this","ReactDOM","findDOMNode","getElementsByTagName","TextField","label","defaultValue","onChange","InputLabelProps","shrink","React","Component","phoneEditor","handleChangePhone","phone","country","placeholder","defaultColumnProperties","filterable","sortable","resizable","editable","formatter","minWidth","DropDownEditor","Editors","NumericFilter","Filters","AutoCompleteFilter","TShirtSizesEditor","options","genderEditor","classEditor","columns","filterRenderer","editor","c","departmentManagerColumns","coordinatorColumns","tutorColumns","Columns","setRows","setLoading","str","onSnapshot","querySnapshot","fid","err","console","log","getUsersPhones","setIDArr","getStudentsPhones","getTutors","answer","row","getCoordinators","getDepartmentManagers","root","alignContent","border","borderRadius","borderColor","borderWidth","maxWidth","nested","paddingLeft","spacing","actionsContainer","flexDirection","actions","margin","padding","saveContainer","marginRight","button","fontFamily","formTitle","font","formText","textField","marginLeft","icon","buttonProgress","green","position","top","left","menu","rowRender","selectors","Data","Selectors","sortRows","initialRows","sortColumn","sortDirection","rows","sort","a","b","handleFilterChange","filters","newFilters","filterTerm","column","RowRenderer","renderBaseRow","rowToRender","lastModified","format","idx","backgroundColor","backgroundPosition","borderBlockColor","TableTabScene","originalRows","setOriginalRows","setMainRows","setSaveButtonColor","saveButtonColor","userStatus","tutors","coordinators","departmentManagers","selectedIndexes","setSelectedIndexes","setFilters","rowsCopy","loading","loadingPage","setLoadingPage","firstNameErr","lastNameErr","genderErr","phoneErr","formState","setFormState","assignmentDialogType","setAssignmentDialogType","openForm","setOpenForm","filteredRows","getRows","newStudent","setNewStudent","loadingAdd","setLoadingAdd","loadingSave","setLoadingSave","openDeleteCheck","setOpenDeleteCheck","openAssignMenu","setOpenAssignMenu","studentsPhones","setStudentsPhones","fixStudentFields","student","hasOwnProperty","fixStudentsFields","arr","getOptionsToAssign","firstName","updateDate","updateNums","i","handleChange","fieldName","handleCloseForm","handleCloseCheckDelete","removeUnnecessaryFields","check","tutor","coordinator","departmentManager","checkIfStudentExist","includes","isValidPhone","addStudent","fixedStudent","add","ref","unshift","getMissedDetailsForAllStudents","catch","error","rowText","columnsToShow","tutorsOptions","coordinatorsOptions","departmentManagersOptions","studentToArr","r","getTutorFromFid","getMissedDetailsForStudent","newSt","status","temp","lastName","getCoordinatorFromFid","getDepartmentManagerFromFid","newRows","firstTimeLoading","fixStudentDOB","saveUpdates","fids","deleteUnnecessaryStudent","ids","j","getTime","getStudentsToUpdate","fixStudentsDOB","set","makeUpdate","borderStyle","variant","disabled","size","CircularProgress","autoComplete","required","autoFocus","select","gender","SelectProps","MenuProps","option","MenuItem","concat","exportToExcel","rowKey","reverse","rowGetter","rowsCount","minHeight","toolbar","enableFilter","onAddFilter","onClearFilters","getValidFilterValues","columnKey","columnId","item","indexOf","onGridSort","onGridRowsUpdated","fromRow","toRow","updated","deepcopy","rowRenderer","enableCellSelect","rowSelection","showCheckbox","enableShiftSelect","onRowsSelected","rowIdx","onRowsDeselected","rowIndexes","newSelectedIndexes","selectBy","indexes","List","component","ListItem","ListItemIcon","ListItemText","primary","Collapse","in","timeout","unmountOnExit","disablePadding","AssignmentDialog","optionsArr","chosenOption","o","update","shift","dataToRemove","FieldValue","arrayRemove","newArr","Typography","AssignmentRow","valueProp","other","setValue","radioGroupRef","useRef","useEffect","onEntering","current","focus","dividers","RadioGroup","newValue","FormControlLabel","control","Radio","labelPlacement","neighborhood","city","palette","background","paper","maxHeight","keepMounted","desc","orderBy","headRows","numeric","EnhancedTableHead","onSelectAllClick","order","numSelected","rowCount","onRequestSort","multiSelect","TableHead","TableRow","TableCell","align","TableSortLabel","active","direction","property","Checkbox","indeterminate","checked","useCircularIndeterminateStyles","progress","CircularIndeterminate","useToolbarStyles","paddingRight","highlight","secondary","main","lighten","light","text","dark","spacer","flex","EnhancedTableToolbar","onClickFetchReport","isFetchingReport","Toolbar","clsx","tableTitle","table","tableWrapper","overflowX","EnhancedTable","selected","handleClick","handleSelectAll","setOrder","setOrderBy","page","setPage","rowsPerPage","setRowsPerPage","emptyRows","Math","min","Paper","Table","TableBody","array","cmp","stabilizedThis","el","index","stableSort","getSorting","slice","isItemSelected","labelId","hover","aria-checked","tabIndex","inputProps","colSpan","TablePagination","rowsPerPageOptions","count","backIconButtonProps","nextIconButtonProps","onChangePage","newPage","onChangeRowsPerPage","genders","Size","rowRener","GenericTab","genericSaveButtonColor","setGenericSaveButtonColor","newRow","setNewRow","usersPhones","setUsersPhones","fixRowFields","fixRowsFields","checkIfUserExist","addRow","fixedRow","rowToArr","deleteUnnecessaryRow","getRowsToUpdate","validate","mandatoryRows","Select","getLabel","checkDisabled","values","chosen","handleClickOpen","canSend","rest","onSelectingDone","existingName","send","groups","schoolGrade","school","address","govID","email","shirtSize","friends","socialCircle","youthGroup","interests","specialIssues","prefferedDays","staffMemberAppointed","comments","dense","AppBar","float","flexGrow","CardContent","scope","NativeSelect","selectEmpty","fileRows","uploadedFinished","Upload","aoo","selecting","uploading","uploadProgress","successfullUploaded","columnsNames","cellVal","fileRowsToTableRows","onNewFile","tableName","keys","aoaToAoo","require","orderAndLabelsOfStatsInReport","ReportsTabScene","reportType","setReportType","selectedMonth","selectedYear","selectedDate","setSelectedDate","setSelected","setIsFetchingReport","fetchReports","results","Error","arr1","arr2","aoaOfUIDs","resultsOfUID","objOfMonthsToShifts","_","groupBy","sortedMonths","sortBy","studentsInYourCare","studentsWhoAttendedContentGroupActivity","groupActivitiesWithAdmirablePerson","regiousGroupActivities","studentsDiscussedWith","studentsWhoSharedProblems","totalHoursWorkedInMonth","sortedShifts","activities","shiftA","shiftB","sortedShiftsWithGroupActivities","some","sortedShiftsWithDiscussion","discussionExists","groupActivitiesExist","lastShiftWithGroupActivity","union","find","participants","flatMapDeep","subtype","attended","sum","discussionActivities","ceil","mapValues","merge","elm","accArr","currUID","currArr","Box","marginBottom","fontWeight","FormControl","aria-label","lang","i18n","monthFormat","dateFormat","he","monthNames","year","maskedValue","selectedIndex","newSelected","n","paddingTop","details","appBar","alignItems","tabLabel","uiConfig","signInFlow","signInOptions","provider","auth","PhoneAuthProvider","PROVIDER_ID","defaultCountry","callbacks","signInSuccessWithAuthResult","popup","MainScene","unregisterAuthObserver","setUserStatus","loadingTutors","setLoadingTutors","loadingCoordinators","setLoadingCoordinators","loadingDepartmentManagers","setLoadingDepartmentManagers","studentsRows","setStudentsRows","tutorsSaveButtonColor","setTutorsSaveButtonColor","coordinatorsSaveButtonColor","setCoordinatorsSaveButtonColor","departmentManagersSaveButtonColor","setDepartmentManagersSaveButtonColor","coordinatorsRows","setCoordinatorsRows","tutorsRows","setTutorsRows","departmentManagersRows","setDepartmentManagersRows","displayedTab","setDisplayedTab","tutorsOriginalRows","setTutorsOriginalRows","coordinatorsOriginalRows","setCoordinatorsOriginalRows","departmentManagersOriginalRows","setDepartmentManagersOriginalRows","languageCode","onAuthStateChanged","user","getIdTokenResult","idTokenResult","claims","isRegistered","signOut","currentUser","logo","firebaseAuth","window","onbeforeunload","Tabs","TabIndicatorProps","textColor","scrollButtons","Tab","getAppropriateStudentsRows","aooToAdd","App","Boolean","location","hostname","match","document","getElementById","render","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.26a7c95d.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/S.5b3b9cd5.jpg\";","const concatAll = aoaoa => {\n  const aoas = [];\n  aoaoa.forEach(subArray => {\n    subArray.forEach(subArrayValue => {\n      aoas.push(subArrayValue);\n    });\n  });\n  return aoas;\n};\n\nconst entriesToObj = entries =>\n  entries.reduce((prev, curr) => {\n    const [key, val] = curr;\n    return { ...prev, [key]: val };\n  }, {});\n\nconst zip = (arr1, arr2) => arr1.map((elm, i) => [elm, arr2[i]]);\n\nconst checkIfAllFieldsHaveValue = (fields, obj, hasValue) => {\n  return fields.filter(field => hasValue(obj, field)).length === fields.length;\n};\n\nconst removeEmptyFields = obj => entriesToObj(Object.entries(obj).filter(([, v]) => v));\n\nexport { concatAll, entriesToObj, zip, checkIfAllFieldsHaveValue, removeEmptyFields };\n","import XLSX from 'xlsx';\nimport { concatAll } from './general-utils';\n\nconst openFile = inputFile => {\n  const fileReader = new FileReader();\n  return new Promise((resolve, reject) => {\n    fileReader.onerror = () => {\n      fileReader.abort();\n      resolve();\n    };\n    fileReader.onload = () => {\n      resolve({ fileName: inputFile.name, result: fileReader.result });\n    };\n    fileReader.readAsArrayBuffer(inputFile);\n  });\n};\n\nconst fileToAOA = ({ fileName, result }) => {\n  const res = [];\n  if (typeof result !== 'string') {\n    const worksheet = XLSX.read(new Uint8Array(result), { type: 'array' });\n    worksheet.SheetNames.forEach(function (sheetName) {\n      const roa = XLSX.utils.sheet_to_json(worksheet.Sheets[sheetName], { header: 1 });\n      if (roa.length) {\n        res.push({ fileName, sheetName, aoa: roa });\n      }\n    });\n  }\n  return res;\n};\n\nconst filesToAOAs = files => {\n  const openPromises = files.map(openFile);\n  return new Promise((resolve, reject) => {\n    Promise.all(openPromises).then(openedFiles => {\n      resolve(\n        concatAll(\n          openedFiles\n            .filter(x => x !== undefined)\n            .map(fileToAOA)\n            .filter(aoa => aoa.length !== 0)\n        )\n      );\n    });\n  });\n};\n\nconst aoaToFile = ({ fileName, sheetName = 'Sheet1', aoa }) => {\n  if (aoa) {\n    const workbook = XLSX.utils.book_new();\n    set_right_to_left(workbook);\n    const sheet = XLSX.utils.aoa_to_sheet(aoa);\n    XLSX.utils.book_append_sheet(workbook, sheet, sheetName);\n    XLSX.writeFile(workbook, fileName + '.xlsx');\n  }\n};\n\nconst set_right_to_left = wb => {\n  if (!wb.Workbook) wb.Workbook = {};\n  if (!wb.Workbook.Views) wb.Workbook.Views = [];\n  if (!wb.Workbook.Views[0]) wb.Workbook.Views[0] = {};\n  wb.Workbook.Views[0].RTL = true;\n};\n\nexport { filesToAOAs, aoaToFile };\n","\nimport React from \"react\";\n\nimport {\n    makeStyles,\n    Button,\n    Dialog,\n    DialogTitle,\n    DialogContent,\n    DialogActions,\n    DialogContentText,\n\n} from '@material-ui/core/';\n\nconst useStyles = makeStyles(theme => ({\n    title: {\n        textAlign: 'center',\n        fontSize: 30,\n    },\n\n\n}));\n\nconst MsgToShow = ({ title, body, visible, handleClose }) => {\n\n    const classes = useStyles();\n\n    function _handleClose() {\n        handleClose();\n    }\n\n    return (\n        <Dialog\n            disableBackdropClick\n            disableEscapeKeyDown\n            open={visible}\n            onClose={_handleClose}\n            aria-labelledby=\"alert-dialog-title\"\n            aria-describedby=\"alert-dialog-description\"\n        >\n            <DialogTitle id=\"alert-dialog-title\" className={classes.title}>{title}</DialogTitle>\n            <DialogContent>\n                <DialogContentText id=\"alert-dialog-description\">\n                    {body}\n                </DialogContentText>\n            </DialogContent>\n            <DialogActions>\n                <Button onClick={_handleClose} color=\"primary\">\n                    OK\n          </Button>\n            </DialogActions>\n        </Dialog>\n    );\n}\n\nexport { MsgToShow };","import React, { useCallback, useState } from 'react';\nimport { useDropzone } from 'react-dropzone';\nimport { filesToAOAs } from '../utils/excell-utils';\nimport { MsgToShow } from './MsgToShow';\n\nimport logo from '../assets/images/tamir_logoshakuf.png';\n\nconst Dropzone = ({ onGetFile }) => {\n  const [msgState, setMsgState] = useState({ title: '', body: '', visible: false });\n  const onDrop = useCallback(acceptedFiles => {\n    filesToAOAs(acceptedFiles).then(aoas => {\n      if (aoas.length > 0) onGetFile(aoas[0].aoa);\n      else {\n        setMsgState({\n          title: ' ',\n          body: '!    ',\n          visible: true\n        });\n      }\n    });\n  }, []);\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({ onDrop });\n\n  return (\n    <div {...getRootProps()} style={{ display: 'flex', justifyContent: 'center', marginTop: 100 }}>\n      <MsgToShow {...msgState} handleClose={() => setMsgState({ ...msgState, visible: false })} />\n\n      <input {...getInputProps()} />\n      {isDragActive ? (\n\n        <img src={\"https://i.imgur.com/7YQeiQX.png\"} style={{\n          width: 350,\n          height: 350,\n          alignSelf: 'center',\n        }} />\n\n      ) : (\n          <img src={\"https://i.imgur.com/7YQeiQX.png\"} style={{\n            width: 350,\n            height: 350,\n            alignSelf: 'center',\n          }} />\n        )}\n    </div>\n  );\n};\n\nexport default Dropzone;\n","import moment from 'moment';\n\nconst toMoment = date => {\n  if (date instanceof Date) {\n    return moment(date);\n  }\n  return moment(date.toDate());\n};\n\nconst diffInHours = (start, end) => {\n  const startMoment = toMoment(start);\n  const endMoment = toMoment(end);\n  const diff = moment.duration(endMoment.diff(startMoment)).asHours();\n  return diff < 0 ? 0 : diff;\n};\n\nexport { diffInHours, toMoment };\n","import { diffInHours } from '../utils/date-utils';\n\nconst totalHoursWorked = attendanceDays =>\n  attendanceDays\n    .map(({ endTime, startTime }) => (startTime && endTime ? diffInHours(startTime, endTime) : 0))\n    .reduce((acc, curr) => acc + curr, 0);\n\nconst addOwners = (myRole, myUid, myOwners, roleOfUserToAdd, userToAdd) => {\n  if (roleOfUserToAdd) {\n    if (myRole === 'ceo')\n      return {\n        ...userToAdd,\n        role: roleOfUserToAdd.substr(0, roleOfUserToAdd.length - 1)\n      };\n    return {\n      ...userToAdd,\n      owners: {\n        ...myOwners,\n        [myRole + 's']: [myUid]\n      },\n      role: roleOfUserToAdd.substr(0, roleOfUserToAdd.length - 1)\n    };\n  }\n  return {\n    ...userToAdd,\n    owners: {\n      ...myOwners,\n      [myRole + 's']: myRole === 'tutor' ? [{ studentStatus: 'normal', uid: myUid }] : [myUid]\n    }\n  };\n};\n\nexport { totalHoursWorked, addOwners };\n","import firebase from 'firebase/app';\nimport 'firebase/firestore';\n\nlet firestoreDb = null;\n\nconst collections = {\n  students: 'Students',\n  attendanceDays: 'AttendanceDays',\n  users: 'Users'\n};\n\nfunction getStudents() {\n  return firestoreDb.collection(collections.students);\n}\n\nfunction getSpecificStudent(studentId) {\n  return firestoreDb.collection(collections.students).doc(studentId);\n}\n\nfunction getSpecificUser(Uid) {\n  return firestoreDb.collection(collections.users).doc(Uid);\n}\n\nfunction getUsers() {\n  return firestoreDb.collection(collections.users);\n}\n\nfunction deleteStudent(studentId) {\n  return firestoreDb\n    .collection(collections.students)\n    .doc(studentId)\n    .delete();\n}\n\nfunction deleteUser(userId) {\n  return firestoreDb\n    .collection(collections.users)\n    .doc(userId)\n    .delete();\n}\n\nconst getDaysCountInMonth = date => new Date(date.getFullYear(), date.getMonth() + 1, 0).getDate();\n\nconst getAttendance = (tutorUIDs, month) => {\n  if (month) {\n    const firstOfMonth = new Date(month.getFullYear(), month.getMonth());\n    const lastOfMonth = new Date(month.getFullYear(), month.getMonth(), getDaysCountInMonth(month));\n\n    return Promise.all(\n      tutorUIDs.map(tutorUID =>\n        firestoreDb\n          .collection(collections.attendanceDays)\n          .where('owners.tutors', 'array-contains', tutorUID)\n          .where('day', '>=', firstOfMonth)\n          .where('day', '<=', lastOfMonth)\n          .get()\n          .then(snapshot => snapshot.docs.flatMap(doc => doc.data().shifts))\n      )\n    );\n  } else {\n    return Promise.all(\n      tutorUIDs.map(tutorUID =>\n        firestoreDb\n          .collection(collections.attendanceDays)\n          .where('owners.tutors', 'array-contains', tutorUID)\n          .get()\n          .then(snapshot => snapshot.docs.flatMap(doc => doc.data().shifts))\n      )\n    );\n  }\n};\n\nconst getModule = () => {\n  firestoreDb = firebase.firestore();\n  return {\n    deleteStudent,\n    getStudents,\n    deleteUser,\n    getSpecificStudent,\n    getSpecificUser,\n    getUsers,\n    getAttendance\n  };\n};\n\nexport default getModule;\n","import firebase from 'firebase/app';\nimport firestoreModuleInit from './Firestore'\n\n\nconst firebaseConfig = {\n    apiKey: \"AIzaSyDEaOcHtrnBB3GQ12z1nR9qRNfwEIsNrFo\",\n    authDomain: \"tamir-db.firebaseapp.com\",\n    databaseURL: \"https://tamir-db.firebaseio.com\",\n    projectId: \"tamir-db\",\n    storageBucket: \"tamir-db.appspot.com\",\n    messagingSenderId: \"463912944330\",\n    appId: \"1:463912944330:web:2a447f8b8212da82\"\n};\nfirebase.initializeApp(firebaseConfig);\n\nconst firestoreModule = firestoreModuleInit()\n\nexport { firestoreModule }","import React from 'react';\nimport { Filters, Editors } from 'react-data-grid-addons';\nimport { TextField } from '@material-ui/core';\nimport ReactDOM from 'react-dom';\nimport 'react-dates/initialize';\nimport PhoneInput from 'react-phone-number-input/react-responsive-ui';\n\nclass BirthDayEditor extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      dob: props.value\n    };\n  }\n\n  getValue() {\n    return { dob: this.state.dob };\n  }\n\n  getInputNode() {\n    return ReactDOM.findDOMNode(this).getElementsByTagName('input')[0];\n  }\n\n  handleChangeComplete = event => {\n    this.setState({ dob: event.target.value }, () => this.props.onCommit());\n  };\n\n  render() {\n    return (\n      <form>\n        <TextField\n          id=\"date\"\n          label=\"Birthday\"\n          style={{\n            width: 200\n          }}\n          type=\"date\"\n          defaultValue=\"30-06-2019\"\n          value={this.state.dob}\n          onChange={this.handleChangeComplete}\n          InputLabelProps={{\n            shrink: true\n          }}\n        />\n      </form>\n    );\n  }\n}\n\nclass phoneEditor extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      phone: props.value\n    };\n  }\n  getValue() {\n    return { phone: this.state.phone };\n  }\n  getInputNode() {\n    return ReactDOM.findDOMNode(this).getElementsByTagName('input')[0];\n  }\n  handleChangePhone = name => value => {\n    this.setState({ ...this.state, [name]: value });\n  };\n  render() {\n    return (\n      <form>\n        <PhoneInput\n          country=\"IL\"\n          placeholder=\"\"\n          value={this.state.phone}\n          onChange={this.handleChangePhone('phone')}\n        />\n      </form>\n    );\n  }\n}\n\nconst formatter = ({ value }) => {\n  return <div style={{ textAlign: 'right' }}>{value}</div>;\n};\n\nconst defaultColumnProperties = {\n  filterable: true,\n  sortable: true,\n  resizable: true,\n  editable: true,\n  formatter: formatter,\n  minWidth: 50\n};\n\nconst { DropDownEditor } = Editors;\n\nconst { NumericFilter, AutoCompleteFilter } = Filters;\n\nconst TShirtSizes = [\n  { id: 'xSmall', value: 'XXXS' },\n  { id: 'xSmall', value: 'XXS' },\n  { id: 'xSmall', value: 'XS' },\n  { id: 'small', value: 'S' },\n  { id: 'medium', value: 'M' },\n  { id: 'large', value: 'L' },\n  { id: 'xLarge', value: 'XL' },\n  { id: 'xSmall', value: 'XXL' },\n  { id: 'xSmall', value: 'XXXL' }\n];\n\nconst gradeOptions = [\n  { id: '1', value: '' },\n  { id: '2', value: '' },\n  { id: '3', value: '' },\n  { id: '4', value: '' },\n  { id: '5', value: '' },\n  { id: '6', value: '' },\n  { id: '7', value: '' },\n  { id: '8', value: '' },\n  { id: '9', value: '' },\n  { id: '10', value: '' },\n  { id: '11', value: '' },\n  { id: '12', value: '' }\n];\n\nconst genderOptions = [{ id: 'male', value: '' }, { id: 'female', value: '' }];\n\nconst TShirtSizesEditor = <DropDownEditor options={TShirtSizes} />;\nconst genderEditor = <DropDownEditor options={genderOptions} />;\nconst classEditor = <DropDownEditor options={gradeOptions} />;\n\nconst columns = [\n  {\n    key: 'id',\n    name: 'No.',\n    width: 40,\n    filterRenderer: NumericFilter,\n    editable: false\n  },\n  {\n    key: 'lastName',\n    name: ' ',\n    width: 100,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'firstName',\n    name: ' ',\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'groups',\n    name: '',\n    width: 100,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'phone',\n    name: '',\n    width: 130,\n    editor: phoneEditor,\n    formatter: false,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'gender',\n    name: '',\n    editor: genderEditor,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'tutor',\n    name: '',\n    editable: false,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'coordinator',\n    name: ' ',\n    editable: false,\n    width: 100,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'departmentManager',\n    name: ' ',\n    editable: false,\n    width: 120,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'schoolGrade',\n    name: '',\n    width: 110,\n    editor: classEditor,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'school',\n    name: ' ',\n    width: 110,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'address',\n    name: '',\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'neighborhood',\n    name: '',\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'dob',\n    name: ' ',\n    editor: BirthDayEditor,\n    width: 100,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'govID',\n    name: ' ',\n    width: 100,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'city',\n    name: '',\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'email',\n    name: '',\n    width: 110,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'shirtSize',\n    name: ' ',\n    width: 100,\n    filterRenderer: AutoCompleteFilter,\n    editor: TShirtSizesEditor\n  },\n\n  {\n    key: 'friends',\n    name: '',\n    width: 120,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'socialCircle',\n    name: ' ',\n    width: 110,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'youthGroup',\n    name: ' ',\n    width: 100,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'interests',\n    name: ' ',\n    width: 100,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'specialIssues',\n    name: ' ',\n    width: 110,\n    filterRenderer: AutoCompleteFilter\n  },\n\n  {\n    key: 'prefferedDays',\n    name: ' ',\n    width: 110,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'staffMemberAppointed',\n    name: '  ',\n    width: 120,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'comments',\n    name: '',\n    filterRenderer: AutoCompleteFilter\n  },\n\n  {\n    key: 'studentStatus',\n    name: '',\n    filterRenderer: AutoCompleteFilter,\n    editable: false\n  },\n\n  {\n    key: 'lastModified',\n    name: ' ',\n    filterRenderer: AutoCompleteFilter,\n    editable: false,\n    width: 160\n  },\n  {\n    key: 'check',\n    width: 5\n  }\n].map(c => ({ ...defaultColumnProperties, ...c }));\n\nconst departmentManagerColumns = [\n  {\n    key: 'id',\n    name: 'No.',\n    width: 40,\n    filterRenderer: NumericFilter,\n    editable: false\n  },\n  {\n    key: 'lastName',\n    name: ' ',\n    width: 100,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'firstName',\n    name: ' ',\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'groups',\n    name: '',\n    width: 100,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'phone',\n    name: '',\n    width: 130,\n    editor: phoneEditor,\n    formatter: false,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'gender',\n    name: '',\n    editor: genderEditor,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'tutor',\n    name: '',\n    editable: false,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'coordinator',\n    name: ' ',\n    editable: false,\n    width: 100,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'schoolGrade',\n    name: '',\n    width: 110,\n    editor: classEditor,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'school',\n    name: ' ',\n    width: 110,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'address',\n    name: '',\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'neighborhood',\n    name: '',\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'dob',\n    name: ' ',\n    editor: BirthDayEditor,\n    width: 100,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'govID',\n    name: ' ',\n    width: 100,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'city',\n    name: '',\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'email',\n    name: '',\n    width: 110,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'shirtSize',\n    name: ' ',\n    width: 100,\n    filterRenderer: AutoCompleteFilter,\n    editor: TShirtSizesEditor\n  },\n\n  {\n    key: 'friends',\n    name: '',\n    width: 120,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'socialCircle',\n    name: ' ',\n    width: 110,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'youthGroup',\n    name: ' ',\n    width: 100,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'interests',\n    name: ' ',\n    width: 100,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'specialIssues',\n    name: ' ',\n    width: 110,\n    filterRenderer: AutoCompleteFilter\n  },\n\n  {\n    key: 'prefferedDays',\n    name: ' ',\n    width: 110,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'staffMemberAppointed',\n    name: '  ',\n    width: 120,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'comments',\n    name: '',\n    filterRenderer: AutoCompleteFilter\n  },\n\n  {\n    key: 'studentStatus',\n    name: '',\n    filterRenderer: AutoCompleteFilter,\n    editable: false\n  },\n\n  {\n    key: 'lastModified',\n    name: ' ',\n    filterRenderer: AutoCompleteFilter,\n    editable: false,\n    width: 160\n  },\n  {\n    key: 'check',\n    width: 5\n  }\n].map(c => ({ ...defaultColumnProperties, ...c }));\n\nconst coordinatorColumns = [\n  {\n    key: 'id',\n    name: 'No.',\n    width: 40,\n    filterRenderer: NumericFilter,\n    editable: false\n  },\n  {\n    key: 'lastName',\n    name: ' ',\n    width: 100,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'firstName',\n    name: ' ',\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'groups',\n    name: '',\n    width: 100,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'phone',\n    name: '',\n    width: 130,\n    editor: phoneEditor,\n    formatter: false,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'gender',\n    name: '',\n    editor: genderEditor,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'tutor',\n    name: '',\n    editable: false,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'schoolGrade',\n    name: '',\n    width: 110,\n    editor: classEditor,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'school',\n    name: ' ',\n    width: 110,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'address',\n    name: '',\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'neighborhood',\n    name: '',\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'dob',\n    name: ' ',\n    editor: BirthDayEditor,\n    width: 100,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'govID',\n    name: ' ',\n    width: 100,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'city',\n    name: '',\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'email',\n    name: '',\n    width: 110,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'shirtSize',\n    name: ' ',\n    width: 100,\n    filterRenderer: AutoCompleteFilter,\n    editor: TShirtSizesEditor\n  },\n\n  {\n    key: 'friends',\n    name: '',\n    width: 120,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'socialCircle',\n    name: ' ',\n    width: 110,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'youthGroup',\n    name: ' ',\n    width: 100,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'interests',\n    name: ' ',\n    width: 100,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'specialIssues',\n    name: ' ',\n    width: 110,\n    filterRenderer: AutoCompleteFilter\n  },\n\n  {\n    key: 'prefferedDays',\n    name: ' ',\n    width: 110,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'staffMemberAppointed',\n    name: '  ',\n    width: 120,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'comments',\n    name: '',\n    filterRenderer: AutoCompleteFilter\n  },\n\n  {\n    key: 'studentStatus',\n    name: '',\n    filterRenderer: AutoCompleteFilter,\n    editable: false\n  },\n\n  {\n    key: 'lastModified',\n    name: ' ',\n    filterRenderer: AutoCompleteFilter,\n    editable: false,\n    width: 160\n  },\n  {\n    key: 'check',\n    width: 5\n  }\n].map(c => ({ ...defaultColumnProperties, ...c }));\n\nconst tutorColumns = [\n  {\n    key: 'id',\n    name: 'No.',\n    width: 40,\n    filterRenderer: NumericFilter,\n    editable: false\n  },\n  {\n    key: 'lastName',\n    name: ' ',\n    width: 100,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'firstName',\n    name: ' ',\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'groups',\n    name: '',\n    width: 100,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'phone',\n    name: '',\n    width: 130,\n    editor: phoneEditor,\n    formatter: false,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'gender',\n    name: '',\n    editor: genderEditor,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'schoolGrade',\n    name: '',\n    width: 110,\n    editor: classEditor,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'school',\n    name: ' ',\n    width: 110,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'address',\n    name: '',\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'neighborhood',\n    name: '',\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'dob',\n    name: ' ',\n    editor: BirthDayEditor,\n    width: 100,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'govID',\n    name: ' ',\n    width: 100,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'city',\n    name: '',\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'email',\n    name: '',\n    width: 110,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'shirtSize',\n    name: ' ',\n    width: 100,\n    filterRenderer: AutoCompleteFilter,\n    editor: TShirtSizesEditor\n  },\n\n  {\n    key: 'friends',\n    name: '',\n    width: 120,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'socialCircle',\n    name: ' ',\n    width: 110,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'youthGroup',\n    name: ' ',\n    width: 100,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'interests',\n    name: ' ',\n    width: 100,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'specialIssues',\n    name: ' ',\n    width: 110,\n    filterRenderer: AutoCompleteFilter\n  },\n\n  {\n    key: 'prefferedDays',\n    name: ' ',\n    width: 110,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'staffMemberAppointed',\n    name: '  ',\n    width: 120,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'comments',\n    name: '',\n    filterRenderer: AutoCompleteFilter\n  },\n\n  {\n    key: 'studentStatus',\n    name: '',\n    filterRenderer: AutoCompleteFilter,\n    editable: false\n  },\n\n  {\n    key: 'lastModified',\n    name: ' ',\n    filterRenderer: AutoCompleteFilter,\n    editable: false,\n    width: 160\n  },\n  {\n    key: 'check',\n    width: 5\n  }\n].map(c => ({ ...defaultColumnProperties, ...c }));\n\nconst Columns = role => {\n  if (role === 'departmentManager') return departmentManagerColumns;\n  else if (role === 'coordinator') return coordinatorColumns;\n  else if (role === 'tutor') return tutorColumns;\n  else return columns;\n};\n\nexport { Columns };\n","import { firestoreModule } from '../Firebase/Firebase';\n\nconst getStudents = (setRows, setLoading, uid, role) => {\n  let str = 'owners.' + role + 's';\n  if (role === 'ceo')\n    firestoreModule\n      .getStudents()\n      .onSnapshot(querySnapshot => {\n        setRows(querySnapshot.docs.map(doc => ({ ...doc.data(), fid: doc.id })))\n        setLoading(false);\n      }, err => {\n        console.log(err);\n        setLoading(false);\n      });\n  else if (role === 'tutor')\n    firestoreModule\n      .getStudents()\n      .where(str, 'array-contains', { uid })\n      .onSnapshot(querySnapshot => {\n        console.log(querySnapshot);\n        setRows(querySnapshot.docs.map(doc => ({ ...doc.data(), fid: doc.id })))\n        setLoading(false);\n      }, err => {\n        console.log(err);\n        setLoading(false);\n      });\n  else {\n    firestoreModule\n      .getStudents()\n      .where(str, 'array-contains', uid)\n      .onSnapshot(querySnapshot => {\n        setRows(querySnapshot.docs.map(doc => ({ ...doc.data(), fid: doc.id })))\n        setLoading(false);\n      }, err => {\n        console.log(err);\n        setLoading(false);\n      });\n  }\n};\n\nconst getUsersPhones = (setIDArr) => {\n  firestoreModule\n    .getUsers()\n    .onSnapshot(snapshot => {\n      setIDArr(snapshot.docs.map(doc => doc.data()['phone']));\n    }, err => {\n      console.log(err);\n    });\n}\nconst getStudentsPhones = (setIDArr) => {\n  firestoreModule\n    .getStudents()\n    .onSnapshot(snapshot => {\n      setIDArr(snapshot.docs.map(doc => doc.data()['phone']));\n    }, err => {\n      console.log(err);\n    });\n}\n\nconst getTutors = (setRows, uid, setLoading, role) => {\n\n  let str = 'owners.' + role + 's';\n  if (role === 'ceo') {\n    firestoreModule\n      .getUsers()\n      .onSnapshot(snapshot => {\n        let answer = snapshot.docs.map(doc => ({ ...doc.data(), fid: doc.id }));\n        answer = answer.filter(row => row.role === 'tutor');\n        setRows(answer);\n        setLoading(false);\n      }, err => {\n        console.log(err);\n        setLoading(false);\n      });\n  }\n  else {\n    firestoreModule\n      .getUsers()\n      .where(str, 'array-contains', uid)\n      .onSnapshot(snapshot => {\n        let answer = snapshot.docs.map(doc => ({ ...doc.data(), fid: doc.id }));\n        answer = answer.filter(row => row.role === 'tutor');\n        setRows(answer);\n        setLoading(false);\n      }, err => {\n        console.log(err);\n        setLoading(false);\n      });\n  }\n}\n\nconst getCoordinators = (setRows, uid, setLoading, role) => {\n  if (role === 'departmentManager')\n    firestoreModule\n      .getUsers()\n      .where(\"owners.departmentManagers\", 'array-contains', uid)\n      .onSnapshot(snapshot => {\n        let answer = snapshot.docs.map(doc => ({ ...doc.data(), fid: doc.id }));\n        answer = answer.filter(row => row.role === 'coordinator');\n        setRows(answer);\n        setLoading(false);\n      }, err => {\n        console.log(err);\n        setLoading(false);\n      });\n  else\n    firestoreModule\n      .getUsers()\n      .onSnapshot(snapshot => {\n        let answer = snapshot.docs.map(doc => ({ ...doc.data(), fid: doc.id }));\n        answer = answer.filter(row => row.role === 'coordinator');\n        setRows(answer);\n        setLoading(false);\n      }, err => {\n        console.log(err);\n        setLoading(false);\n      });\n\n}\n\nconst getDepartmentManagers = (setRows, setLoading) => {\n\n  firestoreModule\n    .getUsers()\n    .onSnapshot(snapshot => {\n\n      let answer = snapshot.docs.map(doc => ({ ...doc.data(), fid: doc.id }));\n      answer = answer.filter(row => row.role === 'departmentManager');\n      setRows(answer);\n      setLoading(false);\n    }, err => {\n      console.log(err);\n      setLoading(false);\n    });\n\n}\n\nexport { getStudents, getTutors, getCoordinators, getDepartmentManagers, getUsersPhones, getStudentsPhones };\n","import React, { useState } from 'react';\nimport ReactDataGrid from 'react-data-grid';\nimport { Toolbar, Data } from 'react-data-grid-addons';\nimport {\n  makeStyles,\n  Button,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  DialogContentText,\n  CircularProgress,\n  MenuItem,\n  TextField,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Collapse,\n  Typography\n} from '@material-ui/core/';\nimport { MsgToShow, AssignmentDialog } from '.';\nimport ExpandLess from '@material-ui/icons/ExpandLess';\nimport ExpandMore from '@material-ui/icons/ExpandMore';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport AddIcon from '@material-ui/icons/Add';\nimport SaveIcon from '@material-ui/icons/Save';\nimport AssignmentIcon from '@material-ui/icons/AssignmentInd';\nimport firebase from 'firebase/app';\nimport 'firebase/firestore';\nimport { aoaToFile } from '../utils/excell-utils';\nimport { addOwners } from '../utils/local-db';\nimport green from '@material-ui/core/colors/green';\nimport 'react-responsive-ui/style.css';\nimport PhoneInput from 'react-phone-number-input/react-responsive-ui';\nimport { firestoreModule } from '../Firebase/Firebase';\nimport { Columns } from '../utils/getColumns';\nimport moment from 'moment';\nimport deepcopy from 'deepcopy';\nimport { getStudentsPhones } from '../utils/createRowData';\nimport { entriesToObj } from '../utils/general-utils';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    textAlign: 'center',\n    alignContent: 'center',\n    border: 3,\n    borderRadius: 3,\n    borderColor: 'black',\n    borderWidth: 3,\n    width: '100%',\n    maxWidth: 300\n  },\n  nested: {\n    paddingLeft: theme.spacing(2),\n    border: 3,\n    borderRadius: 3\n  },\n  actionsContainer: {\n    display: 'flex',\n    flexDirection: 'row-reverse'\n  },\n  actions: {\n    display: 'flex',\n    margin: theme.spacing(1),\n    flexDirection: 'column',\n    padding: 5,\n    marginTop: 20\n  },\n  saveContainer: {\n    display: 'flex',\n    flexDirection: 'column',\n    margin: theme.spacing(1),\n    marginRight: 'auto',\n    padding: 5,\n    marginTop: 20\n  },\n  button: {\n    borderRadius: 5,\n    fontFamily: 'Arial',\n    fontSize: 18,\n    padding: 4,\n    margin: theme.spacing(1),\n    textAlign: 'center',\n    alignContent: 'center'\n  },\n  formTitle: {\n    textAlign: 'center',\n    font: 30\n  },\n  formText: {\n    textAlign: 'right'\n  },\n  textField: {\n    marginLeft: theme.spacing(1),\n    marginRight: theme.spacing(1),\n    textAlign: 'right',\n    width: 150\n  },\n  icon: {\n    margin: theme.spacing(1)\n  },\n  buttonProgress: {\n    color: green[500],\n    position: 'absolute',\n    top: '50%',\n    left: '50%',\n    marginTop: -12,\n    marginLeft: -12\n  },\n  menu: {\n    width: 150\n  },\n  rowRender: {\n    border: 1,\n    borderRadius: 3\n  }\n}));\n\nconst selectors = Data.Selectors;\n\nconst sortRows = (initialRows, sortColumn, sortDirection) => rows => {\n  const comparer = (a, b) => {\n    if (sortDirection === 'ASC') {\n      return a[sortColumn] > b[sortColumn] ? 1 : -1;\n    } else if (sortDirection === 'DESC') {\n      return a[sortColumn] < b[sortColumn] ? 1 : -1;\n    }\n  };\n  return sortDirection === 'NONE' ? initialRows : [...rows].sort(comparer);\n};\n\nconst handleFilterChange = filter => filters => {\n  const newFilters = { ...filters };\n  if (filter.filterTerm) {\n    newFilters[filter.column.key] = filter;\n  } else {\n    delete newFilters[filter.column.key];\n  }\n  return newFilters;\n};\n\nfunction getValidFilterValues(rows, columnId) {\n  return rows\n    .map(r => r[columnId])\n    .filter((item, i, a) => {\n      return i === a.indexOf(item);\n    });\n}\n\nfunction getRows(rows, filters) {\n  return selectors.getRows({ rows, filters });\n}\n\nconst RowRenderer = ({ row, renderBaseRow, ...props }) => {\n  const rowToRender = {\n    ...row,\n    lastModified: moment(row.lastModified).format('DD/MM/YYYY HH:mm:ss'),\n    dob: row.dob === '' ? '' : moment(row.dob).format('DD/MM/YYYY')\n  };\n  const color = props.idx % 2 ? '#eee' : '#3333';\n  return (\n    <div\n      style={{ backgroundColor: color, backgroundPosition: 'absolute', borderBlockColor: color }}>\n      {renderBaseRow({ ...props, row: rowToRender })}\n    </div>\n  );\n};\n\nfunction TableTabScene({\n  originalRows,\n  setOriginalRows,\n  rows,\n  setMainRows,\n  setSaveButtonColor,\n  saveButtonColor,\n  userStatus,\n  role,\n  uid,\n  tutors,\n  coordinators,\n  departmentManagers\n}) {\n  const [selectedIndexes, setSelectedIndexes] = useState([]);\n  const [filters, setFilters] = useState({});\n  let [rowsCopy, setRows] = useState(rows);\n  const [loading, setLoading] = useState(false);\n  const [loadingPage, setLoadingPage] = useState(true);\n  const [msgState, setMsgState] = useState({ title: '', body: '', visible: false });\n  const [formState, setFormState] = useState({\n    firstNameErr: false,\n    lastNameErr: false,\n    genderErr: false,\n    phoneErr: false\n  });\n  const [assignmentDialogType, setAssignmentDialogType] = useState('');\n  const [openForm, setOpenForm] = useState(false);\n  let filteredRows = getRows(rowsCopy, filters);\n  const [newStudent, setNewStudent] = useState({});\n  const [loadingAdd, setLoadingAdd] = useState(false);\n  const [loadingSave, setLoadingSave] = useState(false);\n  const [openDeleteCheck, setOpenDeleteCheck] = useState(false);\n  const [openAssignMenu, setOpenAssignMenu] = useState(false);\n  const [studentsPhones, setStudentsPhones] = useState([]);\n\n  const classes = useStyles();\n  const genders = [\n    {\n      value: '',\n      label: ''\n    },\n    {\n      value: '',\n      label: ''\n    }\n  ];\n\n  function handleClickOnAssignMenu() {\n    setOpenAssignMenu(!openAssignMenu);\n  }\n\n  const removeEmptyFields = obj => entriesToObj(Object.entries(obj).filter(([, v]) => v));\n\n  const fixStudentFields = student => {\n    columns.forEach(({ key }) => {\n      if (student.hasOwnProperty(key)) {\n        if (\n          (key === 'lastModified' || key === 'dob') &&\n          student[key] !== undefined &&\n          student[key] !== null &&\n          student[key] !== ''\n        ) {\n          student[key] = student[key] instanceof Date ? student[key] : student[key].toDate();\n        }\n        if (student[key] === null || student[key] === undefined) {\n          student[key] = '';\n        }\n      } else {\n        student = { ...student, [key]: key === 'lastModified' ? new Date() : '' };\n      }\n    });\n    return student;\n  };\n\n  const fixStudentsFields = arr => {\n    return arr.map(fixStudentFields);\n  };\n\n  const getOptionsToAssign = type => {\n    let answer = [{ firstName: 'None' }];\n    if (type === 'tutors' && tutors.length !== 0) answer = [...answer, ...tutors];\n    else if (type === 'coordinators' && coordinators.length !== 0)\n      answer = [...answer, ...coordinators];\n    else if (departmentManagers.length !== 0) answer = [...answer, ...departmentManagers];\n    return answer;\n  };\n\n  const onGridRowsUpdated = ({ fromRow, toRow, updated }) => {\n    if (updated.phone !== undefined) {\n      if (!isValidPhone(updated.phone)) {\n        setMsgState({\n          title: ' ',\n          body: '!   ',\n          visible: true\n        });\n        return;\n      }\n      if (checkIfStudentExist(updated.phone)) {\n        setMsgState({\n          title: ' ',\n          body: '!   ',\n          visible: true\n        });\n        return;\n      }\n    }\n    setSaveButtonColor('secondary');\n    const newRows = deepcopy(rowsCopy);\n    for (let i = 0; i < newRows.length; i++) {\n      if (i >= fromRow && i <= toRow) {\n        newRows[i] = { ...rowsCopy[i], ...updated };\n        newRows[i].lastModified = updateDate();\n\n      } else {\n        newRows[i] = { ...rowsCopy[i] };\n        newRows[i].lastModified = new Date(newRows[i].lastModified);\n\n      }\n    }\n\n    setRows(newRows);\n    setMainRows(newRows);\n  };\n\n  const updateDate = () => {\n    return new Date();\n  };\n\n  const updateNums = () => {\n    for (let i = 0; i < rowsCopy.length; i++) {\n      rowsCopy[i].id = i + 1;\n    }\n    setRows(rowsCopy);\n    setMainRows(rowsCopy);\n  };\n\n  const handleChange = name => event => {\n    let fieldName = name + 'Err';\n    setFormState({ ...formState, [fieldName]: false });\n    setNewStudent({ ...newStudent, [name]: event.target.value });\n  };\n\n  const handleChangePhone = name => value => {\n    setNewStudent({ ...newStudent, [name]: value });\n  };\n\n  function handleClickOpenForm() {\n    setNewStudent({\n      id: rowsCopy.length,\n      studentStatus: ' ',\n      lastModified: updateDate(),\n      ...newStudent\n    });\n    setOpenForm(true);\n  }\n\n  function handleCloseForm() {\n    setOpenForm(false);\n    setNewStudent({});\n  }\n\n  function handleOpenCheckDelete() {\n    if (selectedIndexes.length > 0) setOpenDeleteCheck(true);\n  }\n  function handleCloseCheckDelete() {\n    setOpenDeleteCheck(false);\n  }\n\n  const deleteRow = () => {\n    if (selectedIndexes.length === 0) return;\n    setLoading(true);\n    const fids = [];\n    selectedIndexes.forEach(idx => fids.push(rowsCopy[idx].fid));\n    if (role === 'ceo') fids.forEach(id => firestoreModule.deleteStudent(id));\n    else {\n      let dataToRemove = '';\n      let str = 'owners.' + role + 's';\n      if (role === 'tutor') {\n        dataToRemove = { studentStatus: 'normal', uid: uid };\n        fids.forEach(id =>\n          firestoreModule\n            .getSpecificStudent(id)\n            .update({ [str]: firebase.firestore.FieldValue.arrayRemove(dataToRemove) })\n        );\n      } else\n        fids.forEach(id =>\n          firestoreModule\n            .getSpecificStudent(id)\n            .update({ [str]: firebase.firestore.FieldValue.arrayRemove(uid) })\n        );\n    }\n\n    let newArr = rowsCopy.filter((row, i) => !selectedIndexes.includes(i));\n    while (selectedIndexes.length !== 0) {\n      selectedIndexes.shift();\n    }\n    rowsCopy = newArr;\n    setRows(rowsCopy);\n    setMainRows(rowsCopy);\n    setLoading(false);\n    handleCloseCheckDelete();\n    setSaveButtonColor('secondary');\n    setMsgState({\n      title: ' ',\n      body: '!    ',\n      visible: true\n    });\n    updateNums();\n  };\n\n  const removeUnnecessaryFields = student => {\n    delete student.check;\n    delete student.id;\n    delete student.studentStatus;\n    delete student.fid;\n    delete student.tutor;\n    delete student.coordinator;\n    delete student.departmentManager;\n  };\n\n  function checkIfStudentExist(phone) {\n    return studentsPhones.includes(phone);\n  }\n\n  function isValidPhone(phone) {\n    if (phone.length === 13) return true;\n    return false;\n  }\n\n  function formValidation() {\n    if (newStudent.firstName === '' || !newStudent.hasOwnProperty('firstName')) {\n      setFormState({ firstNameErr: true });\n      return;\n    } else {\n      setFormState({ firstNameErr: false });\n    }\n    if (newStudent.lastName === '' || !newStudent.hasOwnProperty('lastName')) {\n      setFormState({ lastNameErr: true });\n      return;\n    } else {\n      setFormState({ lastNameErr: false });\n    }\n    if (newStudent.gender === '' || !newStudent.hasOwnProperty('gender')) {\n      setFormState({ genderErr: true });\n      return;\n    } else {\n      setFormState({ genderErr: false });\n    }\n    if (\n      newStudent.phone === '' ||\n      !newStudent.hasOwnProperty('phone') ||\n      newStudent.phone === undefined\n    ) {\n      setFormState({ phoneErr: true });\n      return;\n    } else {\n      setFormState({ phoneErr: false });\n    }\n\n    if (newStudent.phone && !isValidPhone(newStudent.phone)) {\n      setMsgState({\n        title: ' ',\n        body: '!   ',\n        visible: true\n      });\n      return;\n    }\n    if (checkIfStudentExist(newStudent.phone)) {\n      setMsgState({\n        title: ' ',\n        body: '!   ',\n        visible: true\n      });\n      return;\n    }\n    addStudent();\n  }\n\n  const addStudent = () => {\n    setLoadingAdd(true);\n    handleCloseForm();\n    let fixedStudent = fixStudentFields(newStudent);\n    removeUnnecessaryFields(fixedStudent);\n    fixedStudent = addOwners(role, uid, userStatus.owners, null, fixedStudent);\n    fixedStudent = removeEmptyFields(fixedStudent);\n    firestoreModule\n      .getStudents()\n      .add(fixedStudent)\n      .then(ref => {\n        fixedStudent = fixStudentFields(newStudent);\n        fixedStudent = { ...fixedStudent, fid: ref.id };\n        fixedStudent = addOwners(role, uid, userStatus.owners, null, fixedStudent);\n        rowsCopy.unshift(fixedStudent);\n        updateNums();\n        rowsCopy = getMissedDetailsForAllStudents();\n        setRows(rowsCopy);\n        setMainRows(rowsCopy);\n        setSaveButtonColor('secondary');\n        setLoadingAdd(false);\n        setMsgState({\n          title: ' ',\n          body: '!  ',\n          visible: true\n        });\n      })\n      .catch(function (error) {\n        console.log('Error adding student', error);\n        setLoadingAdd(false);\n        setMsgState({\n          title: ' ',\n          body: '!   ',\n          visible: true\n        });\n      });\n  };\n\n  const onRowsSelected = rows => {\n    setSelectedIndexes(selectedIndexes.concat(rows.map(r => r.rowIdx)));\n  };\n\n  const onRowsDeselected = rows => {\n    let rowIndexes = rows.map(r => r.rowIdx);\n    const newSelectedIndexes = selectedIndexes.filter(i => rowIndexes.indexOf(i) === -1);\n    setSelectedIndexes(newSelectedIndexes);\n  };\n\n  const rowText = selectedIndexes.length === 1 ? ' ' : ' ';\n\n  const columns = Columns(role);\n  const columnsToShow = [...columns];\n\n  let tutorsOptions = getOptionsToAssign('tutors');\n\n  let coordinatorsOptions = getOptionsToAssign('coordinators');\n\n  let departmentManagersOptions = getOptionsToAssign('departmentManagers');\n\n  const studentToArr = student => columns.map(r => student[r.key]);\n\n  const exportToExcel = () => {\n    const columnNames = columns.map(r => r.name);\n    const aoa = [columnNames].concat(rowsCopy.map(studentToArr));\n    aoaToFile({ fileName: ' ', aoa });\n  };\n\n  const getTutorFromFid = fid => {\n    for (let i = 0; i < tutors.length; i++) {\n      if (tutors[i].fid === fid) return tutors[i];\n    }\n    return undefined;\n  };\n\n  const getCoordinatorFromFid = fid => {\n    for (let i = 0; i < coordinators.length; i++) {\n      if (coordinators[i].fid === fid) return coordinators[i];\n    }\n    return undefined;\n  };\n\n  const getDepartmentManagerFromFid = fid => {\n    for (let i = 0; i < departmentManagers.length; i++) {\n      if (departmentManagers[i].fid === fid) return departmentManagers[i];\n    }\n    return undefined;\n  };\n\n  const getMissedDetailsForStudent = student => {\n    let newSt = { ...student };\n    let status = '';\n    let tutor = '';\n    let coordinator = '';\n    let departmentManager = '';\n\n    if (newSt.owners !== null && newSt.owners !== undefined) {\n      if (newSt.owners.hasOwnProperty('tutors') && newSt.owners.tutors.length > 0) {\n        let arr = newSt.owners.tutors;\n        for (let i = 0; i < arr.length; i++) {\n          if (arr[i].studentStatus === 'normal') {\n            status = '';\n            let temp = getTutorFromFid(arr[i].uid);\n            if (temp !== undefined) tutor = temp.firstName + ' ' + temp.lastName;\n            break;\n          } else if (arr[i].studentStatus === 'potential') {\n            status = '';\n            let temp = getTutorFromFid(arr[i].uid);\n            if (temp !== undefined) tutor = temp.firstName + ' ' + temp.lastName;\n          }\n        }\n      }\n\n      if (newSt.owners.hasOwnProperty('coordinators') && newSt.owners.coordinators.length > 0) {\n        let temp = getCoordinatorFromFid(newSt.owners.coordinators[0]);\n        if (temp !== undefined) coordinator = temp.firstName + ' ' + temp.lastName;\n      }\n\n      if (\n        newSt.owners.hasOwnProperty('departmentManagers') &&\n        newSt.owners.departmentManagers.length > 0\n      ) {\n        let temp = getDepartmentManagerFromFid(newSt.owners.departmentManagers[0]);\n        if (temp !== undefined) departmentManager = temp.firstName + ' ' + temp.lastName;\n      }\n      newSt = {\n        ...newSt,\n        studentStatus: status,\n        tutor: tutor,\n        departmentManager: departmentManager,\n        coordinator: coordinator\n      };\n    }\n\n    return newSt;\n  };\n\n  const getMissedDetailsForAllStudents = () => {\n    return rowsCopy.map(getMissedDetailsForStudent);\n  };\n\n  const firstTimeLoading = () => {\n    updateNums();\n    let newRows = fixStudentsFields(rowsCopy);\n    rowsCopy = [...newRows];\n    newRows = getMissedDetailsForAllStudents();\n    getStudentsPhones(setStudentsPhones);\n    setRows(newRows);\n    setMainRows([...newRows]);\n    setLoadingPage(false);\n  };\n\n  if (loadingPage) firstTimeLoading();\n\n  const deleteUnnecessaryStudent = () => {\n    let fids = rowsCopy.map(row => row.fid);\n    originalRows = originalRows.filter(row => fids.includes(row.fid));\n    setOriginalRows([...originalRows]);\n  };\n\n  const getStudentsToUpdate = () => {\n    let ids = [];\n    let students = [];\n    rowsCopy.map(row => ids.push({ id: row.id - 1, fid: row.fid }));\n    for (let i = 0; i < originalRows.length; i++) {\n      for (let j = 0; j < ids.length; j++) {\n        if (originalRows[i].fid === ids[j].fid) {\n          if (rowsCopy[ids[j].id] !== undefined) {\n            if (\n              originalRows[i].lastModified.toDate().getTime() !==\n              new Date(rowsCopy[ids[j].id].lastModified).getTime()\n            ) {\n              students.push(rowsCopy[ids[j].id]);\n            }\n          }\n        }\n      }\n    }\n\n    return students;\n  };\n\n  const makeUpdate = arr => {\n    arr.forEach(student => {\n      let temp = { ...student };\n      removeUnnecessaryFields(temp);\n      temp = removeEmptyFields(temp);\n      firestoreModule.getSpecificStudent(student.fid).set(temp);\n    });\n  };\n\n  const fixStudentDOB = student => {\n    if (student.hasOwnProperty('dob')) {\n      if (student.dob !== undefined && student.dob !== null && student.dob !== '') {\n        student.dob = student.dob instanceof Date ? student.dob : new Date(student.dob);\n      }\n    }\n\n    return student;\n  };\n\n  const fixStudentsDOB = arr => {\n    return arr.map(fixStudentDOB);\n  };\n\n  const saveUpdates = () => {\n    setLoadingSave(true);\n    if (originalRows.length !== rowsCopy.length) deleteUnnecessaryStudent();\n    let arr = getStudentsToUpdate();\n    arr = fixStudentsDOB(arr);\n    if (arr.length > 0) makeUpdate(arr);\n    let newRows = fixStudentsFields(rowsCopy);\n    rowsCopy = [...newRows];\n    newRows = getMissedDetailsForAllStudents();\n    setRows(newRows);\n    setMainRows([...newRows]);\n    updateNums();\n    setLoadingSave(false);\n    setSaveButtonColor('default');\n    setMsgState({\n      title: ' ',\n      body: '   ',\n      visible: true\n    });\n  };\n\n  return (\n    <div>\n      <div className={classes.actionsContainer}>\n        <div className={classes.actions}>\n          <Button\n            style={{ color: '#0089c6', border: 3, borderStyle: 'solid' }}\n            variant=\"outlined\"\n            disabled={loadingAdd}\n            size=\"large\"\n            className={classes.button}\n            onClick={() => handleClickOpenForm()}>\n             \n            <AddIcon />\n            {loadingAdd && <CircularProgress size={24} className={classes.buttonProgress} />}\n          </Button>\n\n          <MsgToShow\n            {...msgState}\n            handleClose={() => setMsgState({ ...msgState, visible: false })}\n          />\n\n          <Dialog\n            disableBackdropClick\n            disableEscapeKeyDown\n            open={openForm}\n            onClose={handleCloseForm}\n            aria-labelledby=\"form-dialog-title\">\n            <form autoComplete=\"on\">\n              <DialogTitle id=\"form-dialog-title\" className={classes.formTitle}>\n                 \n              </DialogTitle>\n              <DialogContent>\n                <DialogContentText className={classes.formText}>\n                  **      **\n                </DialogContentText>\n                <TextField\n                  required\n                  autoFocus\n                  error={formState.firstNameErr}\n                  variant=\"outlined\"\n                  margin=\"dense\"\n                  id=\"firstName\"\n                  className={classes.textField}\n                  placeholder=\"\"\n                  label=\" \"\n                  type=\"name\"\n                  onChange={handleChange('firstName')}\n                />\n                <TextField\n                  required\n                  error={formState.lastNameErr}\n                  variant=\"outlined\"\n                  margin=\"dense\"\n                  id=\"lastName\"\n                  className={classes.textField}\n                  placeholder=\"\"\n                  label=\" \"\n                  type=\"name\"\n                  onChange={handleChange('lastName')}\n                />\n\n                <TextField\n                  required\n                  error={formState.genderErr}\n                  variant=\"outlined\"\n                  select\n                  id=\"gender\"\n                  margin=\"dense\"\n                  label=\"\"\n                  className={classes.textField}\n                  onChange={handleChange('gender')}\n                  value={newStudent.gender}\n                  SelectProps={{\n                    MenuProps: {\n                      className: classes.menu\n                    }\n                  }}>\n                  {genders.map(option => (\n                    <MenuItem key={option.value} value={option.value}>\n                      {option.label}\n                    </MenuItem>\n                  ))}\n                </TextField>\n\n                <PhoneInput\n                  error={formState.phoneErr}\n                  country=\"IL\"\n                  label=\"' \"\n                  className={classes.textField}\n                  placeholder=\"\"\n                  onChange={handleChangePhone('phone')}\n                />\n              </DialogContent>\n              <DialogActions>\n                <Button\n                  onClick={handleCloseForm}\n                  color=\"secondary\"\n                  className={classes.button}\n                  size=\"large\">\n                  \n                </Button>\n                <Button\n                  onClick={() => formValidation()}\n                  color=\"primary\"\n                  className={classes.button}\n                  size=\"large\">\n                  \n                </Button>\n              </DialogActions>\n            </form>\n          </Dialog>\n        </div>\n\n        <div className={classes.actions}>\n          <Button\n            style={{ color: '#0089c6', border: 3, borderStyle: 'solid' }}\n            variant=\"outlined\"\n            size=\"large\"\n            className={classes.button}\n            onClick={() => exportToExcel()}>\n             \n            <SaveIcon />\n          </Button>\n        </div>\n\n        <div className={classes.saveContainer}>\n          <Button\n            style={{ border: 3, borderStyle: 'solid' }}\n            variant=\"outlined\"\n            size=\"large\"\n            color={saveButtonColor}\n            className={classes.button}\n            onClick={() => (saveButtonColor === 'secondary' ? saveUpdates() : {})}\n            disabled={loadingSave}>\n             \n            <SaveIcon />\n            {loadingSave && <CircularProgress size={24} className={classes.buttonProgress} />}\n          </Button>\n        </div>\n      </div>\n\n      <ReactDataGrid\n        rowKey=\"id\"\n        columns={columnsToShow.reverse()}\n        rowGetter={i => filteredRows[i]}\n        rowsCount={filteredRows.length}\n        minHeight={350}\n        toolbar={<Toolbar enableFilter={true} />}\n        onAddFilter={filter => setFilters(handleFilterChange(filter))}\n        onClearFilters={() => setFilters({})}\n        getValidFilterValues={columnKey => getValidFilterValues(rowsCopy, columnKey)}\n        onGridSort={(sortColumn, sortDirection) =>\n          setRows(sortRows(rowsCopy, sortColumn, sortDirection))\n        }\n        onGridRowsUpdated={onGridRowsUpdated}\n        rowRenderer={RowRenderer}\n        enableCellSelect={true}\n        rowSelection={{\n          showCheckbox: true,\n          enableShiftSelect: true,\n          onRowsSelected: onRowsSelected,\n          onRowsDeselected: onRowsDeselected,\n          selectBy: {\n            indexes: selectedIndexes\n          }\n        }}\n      />\n\n      {selectedIndexes.length !== 0 ? (\n        <div className={classes.actionsContainer}>\n          <List component=\"nav\" className={classes.root}>\n            <ListItem button onClick={handleClickOnAssignMenu} className={classes.nested}>\n              <ListItemIcon>\n                <AssignmentIcon />\n              </ListItemIcon>\n              <ListItemText primary=\"  \" style={{ textAlign: 'center' }} />\n              {openAssignMenu ? <ExpandLess /> : <ExpandMore />}\n            </ListItem>\n            <Collapse in={openAssignMenu} timeout=\"auto\" unmountOnExit className={classes.nested}>\n              <List component=\"div\" disablePadding>\n                {role !== 'tutor' ? (\n                  <ListItem\n                    button\n                    onClick={() =>\n                      selectedIndexes.length !== 0\n                        ? setAssignmentDialogType('tutors')\n                        : setAssignmentDialogType('')\n                    }\n                    className={classes.nested}>\n                    <ListItemText\n                      primary=\"\"\n                      style={{ textAlign: 'right', marginRight: '33%' }}\n                      className={classes.nested}\n                    />\n                  </ListItem>\n                ) : null}\n                <AssignmentDialog\n                  title=\" \"\n                  optionsArr={tutorsOptions}\n                  visible={assignmentDialogType === 'tutors'}\n                  handleClose={chosenOption => {\n                    setAssignmentDialogType('');\n                    if (selectedIndexes.length !== 0 && chosenOption !== 'Cancel') {\n                      selectedIndexes.map(i => {\n                        if (chosenOption !== 'None') {\n                          let owners = rowsCopy[i].owners;\n                          if (owners.hasOwnProperty('tutors')) {\n                            owners = owners.tutors;\n                            let uids = owners.map(o => o.uid);\n                            if (!uids.includes(chosenOption))\n                              rowsCopy[i].owners.tutors.push({\n                                studentStatus: 'potential',\n                                uid: chosenOption\n                              });\n                          } else {\n                            owners = { ...owners, tutors: [] };\n                            owners.tutors.push({ studentStatus: 'potential', uid: chosenOption });\n                            rowsCopy[i].owners = owners;\n                          }\n                        } else {\n                          rowsCopy[i].owners.tutors = [];\n                        }\n                        firestoreModule\n                          .getSpecificStudent(rowsCopy[i].fid)\n                          .update({ owners: rowsCopy[i].owners });\n                        rowsCopy[i].lastModified = updateDate();\n                        rowsCopy = getMissedDetailsForAllStudents();\n                        setRows(rowsCopy);\n                        setMainRows(rowsCopy);\n                        return [];\n                      });\n                      if (chosenOption !== 'None')\n                        setMsgState({\n                          title: '  ',\n                          body: '    ',\n                          visible: true\n                        });\n                      while (selectedIndexes.length !== 0) {\n                        selectedIndexes.shift();\n                      }\n                      setSaveButtonColor('secondary');\n                    }\n                  }}\n                />\n\n                {role === 'departmentManager' || role === 'ceo' ? (\n                  <ListItem\n                    button\n                    onClick={() =>\n                      selectedIndexes.length !== 0\n                        ? setAssignmentDialogType('coordinators')\n                        : setAssignmentDialogType('')\n                    }>\n                    <ListItemText\n                      primary=\"\"\n                      style={{ textAlign: 'right', marginRight: '33%' }}\n                    />\n                  </ListItem>\n                ) : null}\n                <AssignmentDialog\n                  title=\" \"\n                  optionsArr={coordinatorsOptions}\n                  visible={assignmentDialogType === 'coordinators'}\n                  handleClose={chosenOption => {\n                    setAssignmentDialogType('');\n                    if (selectedIndexes.length !== 0 && chosenOption !== 'Cancel') {\n                      selectedIndexes.map(i => {\n                        if (chosenOption !== 'None') {\n                          let owners = rowsCopy[i].owners;\n                          if (owners.hasOwnProperty('coordinators')) {\n                            owners = owners.coordinators;\n                            if (!owners.includes(chosenOption))\n                              rowsCopy[i].owners.coordinators.push(chosenOption);\n                          } else {\n                            owners = { ...owners, coordinators: [] };\n                            owners.coordinators.push(chosenOption);\n                            rowsCopy[i].owners = owners;\n                          }\n                        } else {\n                          rowsCopy[i].owners.coordinators = [];\n                        }\n                        firestoreModule\n                          .getSpecificStudent(rowsCopy[i].fid)\n                          .update({ owners: rowsCopy[i].owners });\n                        rowsCopy[i].lastModified = updateDate();\n                        rowsCopy = getMissedDetailsForAllStudents();\n                        setRows(rowsCopy);\n                        setMainRows(rowsCopy);\n                        return [];\n                      });\n                      if (chosenOption !== 'None')\n                        setMsgState({\n                          title: '  ',\n                          body: '    ',\n                          visible: true\n                        });\n\n                      while (selectedIndexes.length !== 0) {\n                        selectedIndexes.shift();\n                      }\n                      setSaveButtonColor('secondary');\n                    }\n                    return;\n                  }}\n                />\n\n                {role === 'ceo' ? (\n                  <ListItem\n                    button\n                    className={classes.nested}\n                    onClick={() =>\n                      selectedIndexes.length !== 0\n                        ? setAssignmentDialogType('departmentManagers')\n                        : setAssignmentDialogType('')\n                    }>\n                    <ListItemText\n                      primary=\" \"\n                      style={{ textAlign: 'right', marginRight: '33%' }}\n                    />\n                  </ListItem>\n                ) : null}\n                <AssignmentDialog\n                  title=\"  \"\n                  optionsArr={departmentManagersOptions}\n                  visible={assignmentDialogType === 'departmentManagers'}\n                  handleClose={chosenOption => {\n                    setAssignmentDialogType('');\n                    if (selectedIndexes.length !== 0 && chosenOption !== 'Cancel') {\n                      selectedIndexes.map(i => {\n                        if (chosenOption !== 'None') {\n                          let owners = rowsCopy[i].owners;\n                          if (owners.hasOwnProperty('departmentManagers')) {\n                            owners = owners.departmentManagers;\n\n                            if (!owners.includes(chosenOption))\n                              rowsCopy[i].owners.departmentManagers.push(chosenOption);\n                          } else {\n                            owners = { ...owners, departmentManagers: [] };\n                            owners.departmentManagers.push(chosenOption);\n                            rowsCopy[i].owners = owners;\n                          }\n                        } else {\n                          rowsCopy[i].owners.departmentManagers = [];\n                        }\n                        firestoreModule\n                          .getSpecificStudent(rowsCopy[i].fid)\n                          .update({ owners: rowsCopy[i].owners });\n                        rowsCopy[i].lastModified = updateDate();\n                        rowsCopy = getMissedDetailsForAllStudents();\n                        setRows(rowsCopy);\n                        setMainRows(rowsCopy);\n                        return [];\n                      });\n                      if (chosenOption !== 'None')\n                        setMsgState({\n                          title: '   ',\n                          body: '    ',\n                          visible: true\n                        });\n                      while (selectedIndexes.length !== 0) {\n                        selectedIndexes.shift();\n                      }\n                      setSaveButtonColor('secondary');\n                    }\n                    return;\n                  }}\n                />\n              </List>\n            </Collapse>\n          </List>\n          <List\n            component=\"nav\"\n            className={classes.root}\n            style={{ maxWidth: 250, border: 3, borderColor: 'black' }}>\n            <ListItem button onClick={handleOpenCheckDelete} disabled={loading}>\n              <ListItemIcon>\n                <DeleteIcon />\n              </ListItemIcon>\n              <ListItemText primary=\"  \" style={{ textAlign: 'right' }} />\n              {loading && <CircularProgress size={24} className={classes.buttonProgress} />}\n            </ListItem>\n            <Dialog\n              disableBackdropClick\n              disableEscapeKeyDown\n              open={openDeleteCheck}\n              onClose={handleCloseCheckDelete}>\n              <DialogTitle className={classes.formTitle}>{' '}</DialogTitle>\n              <DialogContent>\n                <DialogContentText className={classes.formText}>\n                        \n                </DialogContentText>\n              </DialogContent>\n              <DialogActions>\n                <Button\n                  onClick={handleCloseCheckDelete}\n                  color=\"primary\"\n                  className={classes.button}\n                  size=\"large\">\n                  \n                </Button>\n                <Button\n                  onClick={deleteRow}\n                  color=\"secondary\"\n                  className={classes.button}\n                  size=\"large\">\n                  \n                </Button>\n              </DialogActions>\n            </Dialog>\n          </List>\n          <List className={classes.saveContainer}>\n            <Typography style={{ color: '#3F51B5', font: 25 }} variant=\"subtitle1\">\n              {selectedIndexes.length} {rowText}\n            </Typography>\n          </List>\n        </div>\n      ) : null}\n    </div>\n  );\n}\n\nexport { TableTabScene };\n","import React, { useState } from 'react';\n\nimport {\n    makeStyles,\n    Button,\n    List,\n    Radio,\n    Dialog,\n    DialogTitle,\n    DialogContent,\n    DialogActions,\n    RadioGroup,\n    FormControlLabel\n} from '@material-ui/core/';\n\nfunction AssignmentRow(props) {\n    const { title, optionsArr, onClose, value: valueProp, open, ...other } = props;\n    const [value, setValue] = useState(valueProp);\n    const radioGroupRef = React.useRef(null);\n    const classes = useStyles();\n\n    React.useEffect(() => {\n        if (!open) {\n            setValue(valueProp);\n        }\n    }, [valueProp, open]);\n\n    function handleEntering() {\n        if (radioGroupRef.current != null) {\n            radioGroupRef.current.focus();\n        }\n    }\n\n    function handleCancel() {\n        onClose('Cancel');\n    }\n\n    function handleOk() {\n        onClose(value);\n    }\n\n    function handleChange(event, newValue) {\n        setValue(newValue);\n    }\n\n    return (\n        <Dialog\n            disableBackdropClick\n            disableEscapeKeyDown\n            onEntering={handleEntering}\n            aria-labelledby=\"confirmation-dialog-title\"\n            open={open}\n            {...other}\n        >\n            <DialogTitle id=\"confirmation-dialog-title\" className={classes.title}>{title}</DialogTitle>\n            <DialogContent dividers>\n                <RadioGroup\n                    ref={radioGroupRef}\n                    value={value}\n                    onChange={handleChange}\n                    className={classes.options}\n\n                >\n                    {optionsArr.map(option => {\n\n                        let label = '';\n                        if (option.firstName === 'None') {\n                            label = option.firstName\n                            return <FormControlLabel value={option.firstName} key={0} control={<Radio color=\"primary\" />} label={label} labelPlacement=\"start\" />\n                        }\n                        else {\n                            if (option.neighborhood !== undefined && option.neighborhood !== null)\n                                label += option.neighborhood;\n                            if (option.city !== undefined && option.city !== null)\n                                label += ', ' + option.city + ', ';\n                            label += option.firstName + ' ' + option.lastName;\n                            return <FormControlLabel value={option.fid} key={option.fid} control={<Radio color=\"primary\" />} label={label} labelPlacement=\"start\" />\n                        }\n\n                    }\n                    )}\n                </RadioGroup>\n            </DialogContent>\n            <DialogActions>\n                <Button onClick={handleCancel} color=\"secondary\" className={classes.button} size='large'>\n                    \n          </Button>\n                <Button onClick={handleOk} color=\"primary\" className={classes.button} size='large'>\n                    \n          </Button>\n            </DialogActions>\n        </Dialog>\n    );\n}\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        width: '100%',\n        maxWidth: 360,\n        backgroundColor: theme.palette.background.paper,\n    },\n    \n    button: {\n        borderRadius: 5,\n        fontFamily: 'Arial',\n        fontSize: 18,\n        padding: 4,\n        height: 40,\n        width: 60,\n    },\n    paper: {\n        width: '80%',\n        maxHeight: 435,\n    },\n    title: {\n        textAlign: 'center',\n        fontSize: 30,\n    },\n    options: {\n        textAlign: 'right',\n        alignContent: 'right',\n    }\n}));\n\nfunction AssignmentDialog({ title, optionsArr, visible, handleClose }) {\n    const classes = useStyles();\n\n    return (\n        <div className={classes.root}>\n            <List component=\"div\" role=\"list\">\n                <AssignmentRow\n                    classes={{ paper: classes.paper, }}\n                    optionsArr={optionsArr}\n                    title={title}\n                    keepMounted\n                    open={visible}\n                    onClose={handleClose}\n                    value={'None'}\n                />\n            </List>\n        </div>\n    );\n}\n\nexport { AssignmentDialog };","import React from 'react';\nimport clsx from 'clsx';\nimport PropTypes from 'prop-types';\nimport { lighten, makeStyles } from '@material-ui/core/styles';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableHead from '@material-ui/core/TableHead';\nimport TablePagination from '@material-ui/core/TablePagination';\nimport TableRow from '@material-ui/core/TableRow';\nimport TableSortLabel from '@material-ui/core/TableSortLabel';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport Paper from '@material-ui/core/Paper';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Button from '@material-ui/core/Button';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nfunction desc(a, b, orderBy) {\n  if (b[orderBy] < a[orderBy]) {\n    return -1;\n  }\n  if (b[orderBy] > a[orderBy]) {\n    return 1;\n  }\n  return 0;\n}\n\nfunction stableSort(array, cmp) {\n  const stabilizedThis = array.map((el, index) => [el, index]);\n  stabilizedThis.sort((a, b) => {\n    const order = cmp(a[0], b[0]);\n    if (order !== 0) return order;\n    return a[1] - b[1];\n  });\n  return stabilizedThis.map(el => el[0]);\n}\n\nfunction getSorting(order, orderBy) {\n  return order === 'desc' ? (a, b) => desc(a, b, orderBy) : (a, b) => -desc(a, b, orderBy);\n}\n\nconst headRows = [\n  { id: 'neighborhood', numeric: false, label: '' },\n  { id: 'city', numeric: false, label: '' },\n  { id: 'gender', numeric: false, label: '' },\n  { id: 'firstName', numeric: false, label: ' ' },\n  { id: 'lastName', numeric: false, label: ' ' }\n];\n\nfunction EnhancedTableHead(props) {\n  const {\n    onSelectAllClick,\n    order,\n    orderBy,\n    numSelected,\n    rowCount,\n    onRequestSort,\n    multiSelect\n  } = props;\n  const createSortHandler = property => event => {\n    onRequestSort(event, property);\n  };\n\n  return (\n    <TableHead>\n      <TableRow style={{ flexDirection: 'row-reverse' }}>\n        {headRows.map(row => (\n          <TableCell\n            key={row.fid}\n            align=\"right\"\n            padding=\"default\"\n            sortDirection={orderBy === row.fid ? order : false}>\n            <TableSortLabel\n              active={orderBy === row.fid}\n              direction={order}\n              onClick={createSortHandler(row.fid)}>\n              {row.label}\n            </TableSortLabel>\n          </TableCell>\n        ))}\n\n        <TableCell padding=\"checkbox\">\n          {multiSelect ? (\n            <Checkbox\n              style={{ color: '#3F51B5' }}\n              indeterminate={numSelected > 0 && numSelected < rowCount}\n              checked={numSelected > 0 && numSelected === rowCount}\n              onChange={onSelectAllClick}\n            />\n          ) : null}\n        </TableCell>\n      </TableRow>\n    </TableHead>\n  );\n}\n\nconst useCircularIndeterminateStyles = makeStyles(theme => ({\n  progress: {\n    margin: theme.spacing(2)\n  }\n}));\n\nconst CircularIndeterminate = () => {\n  const classes = useCircularIndeterminateStyles();\n\n  return (\n    <div>\n      <CircularProgress size={30} className={classes.progress} style={{ color: '#0089c7' }} />\n    </div>\n  );\n};\n\nEnhancedTableHead.propTypes = {\n  numSelected: PropTypes.number.isRequired,\n  onRequestSort: PropTypes.func.isRequired,\n  onSelectAllClick: PropTypes.func.isRequired,\n  order: PropTypes.string.isRequired,\n  orderBy: PropTypes.string.isRequired,\n  rowCount: PropTypes.number.isRequired,\n  multiSelect: PropTypes.bool\n};\n\nconst useToolbarStyles = makeStyles(theme => ({\n  root: {\n    paddingLeft: theme.spacing(2),\n    paddingRight: theme.spacing(1)\n  },\n  highlight:\n    theme.palette.type === 'light'\n      ? {\n          color: theme.palette.secondary.main,\n          backgroundColor: lighten(theme.palette.secondary.light, 0.85)\n        }\n      : {\n          color: theme.palette.text.primary,\n          backgroundColor: theme.palette.secondary.dark\n        },\n  spacer: {\n    flex: '1 1 100%'\n  },\n  actions: {\n    color: theme.palette.text.secondary\n  },\n  title: {\n    flex: '0 0 auto',\n    flexDirection: 'row-reverse'\n  }\n}));\n\nconst EnhancedTableToolbar = props => {\n  const classes = useToolbarStyles();\n  const { numSelected, multiSelect, onClickFetchReport, isFetchingReport } = props;\n\n  return (\n    <Toolbar\n      className={clsx(classes.root, {\n        [classes.highlight]: numSelected > 0\n      })}>\n      <div className={classes.title}>\n        {multiSelect && numSelected > 0 ? (\n          <Typography style={{ color: '#3F51B5' }} variant=\"subtitle1\">\n            {`  ${numSelected}`}\n          </Typography>\n        ) : (\n          <Typography variant=\"h4\" style={{ color: '#41ad48' }}>\n            {props.tableTitle}\n          </Typography>\n        )}\n      </div>\n      <div className={classes.spacer} />\n      <div className={classes.actions}>\n        {numSelected > 0 ? (\n          isFetchingReport ? (\n            <CircularIndeterminate />\n          ) : (\n            <Button onClick={onClickFetchReport} variant=\"outlined\" className={classes.button}>\n              \"\n            </Button>\n          )\n        ) : null}\n      </div>\n    </Toolbar>\n  );\n};\n\nEnhancedTableToolbar.propTypes = {\n  numSelected: PropTypes.number.isRequired,\n  tableTitle: PropTypes.string.isRequired\n};\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    width: '100%'\n  },\n  paper: {\n    width: '100%'\n  },\n  table: {\n    minWidth: 750\n  },\n  tableWrapper: {\n    overflowX: 'auto'\n  }\n}));\nconst EnhancedTable = props => {\n  const {\n    tableTitle,\n    rows,\n    multiSelect,\n    selected,\n    handleClick,\n    handleSelectAll,\n    onClickFetchReport,\n    isFetchingReport\n  } = props;\n  const classes = useStyles();\n  const [order, setOrder] = React.useState('asc');\n  const [orderBy, setOrderBy] = React.useState('lastName');\n  const [page, setPage] = React.useState(0);\n  const [rowsPerPage, setRowsPerPage] = React.useState(5);\n  function handleRequestSort(event, property) {\n    const isDesc = orderBy === property && order === 'desc';\n    setOrder(isDesc ? 'asc' : 'desc');\n    setOrderBy(property);\n  }\n\n  function handleChangePage(event, newPage) {\n    setPage(newPage);\n  }\n\n  function handleChangeRowsPerPage(event) {\n    setRowsPerPage(+event.target.value);\n  }\n\n  const isSelected = name => selected.indexOf(name) !== -1;\n\n  const emptyRows = rowsPerPage - Math.min(rowsPerPage, rows.length - page * rowsPerPage);\n\n  return (\n    <div className={classes.root}>\n      <Paper className={classes.paper}>\n        <EnhancedTableToolbar\n          multiSelect={multiSelect}\n          tableTitle={tableTitle}\n          numSelected={selected.length}\n          onClickFetchReport={onClickFetchReport}\n          isFetchingReport={isFetchingReport}\n        />\n        <div className={classes.tableWrapper}>\n          <Table className={classes.table} aria-labelledby=\"tableTitle\" size=\"medium\">\n            <EnhancedTableHead\n              multiSelect={multiSelect}\n              numSelected={selected.length}\n              order={order}\n              orderBy={orderBy}\n              onSelectAllClick={handleSelectAll}\n              onRequestSort={handleRequestSort}\n              rowCount={rows.length}\n            />\n            <TableBody>\n              {stableSort(rows, getSorting(order, orderBy))\n                .slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\n                .map((row, index) => {\n                  const isItemSelected = isSelected(row.fid);\n                  const labelId = `enhanced-table-checkbox-${index}`;\n\n                  return (\n                    <TableRow\n                      hover\n                      onClick={() => handleClick(row.fid)}\n                      role=\"checkbox\"\n                      aria-checked={isItemSelected}\n                      tabIndex={-1}\n                      key={row.fid}\n                      selected={isItemSelected}>\n                      <TableCell align=\"right\">{row.neighborhood}</TableCell>\n                      <TableCell align=\"right\">{row.city}</TableCell>\n                      <TableCell align=\"right\">{row.gender}</TableCell>\n                      <TableCell align=\"right\">{row.firstName}</TableCell>\n                      <TableCell align=\"right\">{row.lastName}</TableCell>\n                      <TableCell padding=\"checkbox\">\n                        <Checkbox\n                          checked={isItemSelected}\n                          inputProps={{ 'aria-labelledby': labelId }}\n                          style={{ color: '#3F51B5' }}\n                        />\n                      </TableCell>\n                    </TableRow>\n                  );\n                })}\n              {emptyRows > 0 && (\n                <TableRow style={{ height: 49 * emptyRows }}>\n                  <TableCell colSpan={6} />\n                </TableRow>\n              )}\n            </TableBody>\n          </Table>\n        </div>\n        <TablePagination\n          rowsPerPageOptions={[5, 10]}\n          component=\"div\"\n          count={rows.length}\n          rowsPerPage={rowsPerPage}\n          page={page}\n          backIconButtonProps={{\n            'aria-label': 'Previous Page'\n          }}\n          nextIconButtonProps={{\n            'aria-label': 'Next Page'\n          }}\n          onChangePage={handleChangePage}\n          onChangeRowsPerPage={handleChangeRowsPerPage}\n        />\n      </Paper>\n    </div>\n  );\n};\n\nexport { EnhancedTable };\n","import React, { useState } from 'react';\nimport ReactDataGrid from 'react-data-grid';\nimport { Toolbar, Data } from 'react-data-grid-addons';\nimport {\n  makeStyles,\n  Button,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  DialogContentText,\n  CircularProgress,\n  MenuItem,\n  TextField,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Typography\n} from '@material-ui/core/';\nimport { MsgToShow } from '.';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport AddIcon from '@material-ui/icons/Add';\nimport SaveIcon from '@material-ui/icons/Save';\nimport { aoaToFile } from '../utils/excell-utils';\nimport green from '@material-ui/core/colors/green';\nimport 'react-responsive-ui/style.css';\nimport PhoneInput from 'react-phone-number-input/react-responsive-ui';\nimport { firestoreModule } from '../Firebase/Firebase';\nimport moment from 'moment';\nimport ReactDOM from 'react-dom';\nimport { Filters, Editors } from 'react-data-grid-addons';\nimport deepcopy from 'deepcopy';\nimport { getUsersPhones } from '../utils/createRowData';\nimport { removeEmptyFields } from '../utils/general-utils';\nimport { addOwners } from '../utils/local-db';\n\nclass phoneEditor extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      phone: props.value\n    };\n  }\n  getValue() {\n    return { phone: this.state.phone };\n  }\n  getInputNode() {\n    return ReactDOM.findDOMNode(this).getElementsByTagName('input')[0];\n  }\n  handleChangePhone = name => value => {\n    this.setState({ ...this.state, [name]: value });\n  };\n  render() {\n    return (\n      <form>\n        <PhoneInput\n          country=\"IL\"\n          placeholder=\"\"\n          value={this.state.phone}\n          onChange={this.handleChangePhone('phone')}\n        />\n      </form>\n    );\n  }\n}\n\nconst formatter = ({ value }) => {\n  return <div style={{ textAlign: 'right' }}>{value}</div>;\n};\n\nconst defaultColumnProperties = {\n  filterable: true,\n  sortable: true,\n  resizable: true,\n  editable: true,\n  formatter: formatter,\n  minWidth: 50\n};\n\nconst { DropDownEditor } = Editors;\nconst { NumericFilter, AutoCompleteFilter } = Filters;\n\nconst genderOptions = [{ id: 'male', value: '' }, { id: 'female', value: '' }];\nconst genderEditor = <DropDownEditor options={genderOptions} />;\n\nconst columns = [\n  {\n    key: 'id',\n    name: 'No.',\n    width: 40,\n    filterRenderer: NumericFilter,\n    editable: false\n  },\n  {\n    key: 'lastName',\n    name: ' ',\n    width: 100,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'firstName',\n    name: ' ',\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'phone',\n    name: '',\n    width: 130,\n    editor: phoneEditor,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'gender',\n    name: '',\n    editor: genderEditor,\n    filterRenderer: AutoCompleteFilter\n  },\n\n  {\n    key: 'address',\n    name: '',\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'neighborhood',\n    name: '',\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'govID',\n    name: ' ',\n    width: 100,\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'city',\n    name: '',\n    filterRenderer: AutoCompleteFilter\n  },\n  {\n    key: 'email',\n    name: '',\n    width: 110,\n    filterRenderer: AutoCompleteFilter\n  },\n\n  {\n    key: 'lastModified',\n    name: ' ',\n    filterRenderer: AutoCompleteFilter,\n    editable: false,\n    width: 160\n  },\n  {\n    key: 'check',\n    width: 5\n  }\n].map(c => ({ ...defaultColumnProperties, ...c }));\n\nconst genders = [\n  {\n    value: '',\n    label: ''\n  },\n  {\n    value: '',\n    label: ''\n  }\n];\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    textAlign: 'center',\n    alignContent: 'center',\n    border: 3,\n    borderRadius: 3,\n    borderColor: 'black',\n    borderWidth: 3,\n    width: '100%',\n    maxWidth: 300\n  },\n  nested: {\n    paddingLeft: theme.spacing(2),\n    border: 3,\n    borderRadius: 3\n  },\n  actionsContainer: {\n    display: 'flex',\n    flexDirection: 'row-reverse'\n  },\n  actions: {\n    display: 'flex',\n    margin: theme.spacing(1),\n    flexDirection: 'column',\n    padding: 5,\n    marginTop: 20\n  },\n  saveContainer: {\n    display: 'flex',\n    flexDirection: 'column',\n    margin: theme.spacing(1),\n    marginRight: 'auto',\n    padding: 5,\n    marginTop: 20,\n    Size: 50\n  },\n  button: {\n    borderRadius: 5,\n    fontFamily: 'Arial',\n    fontSize: 18,\n    padding: 4,\n    margin: theme.spacing(1),\n    alignContent: 'center',\n    textAlign: 'right'\n  },\n  formTitle: {\n    textAlign: 'center',\n    font: 30\n  },\n  formText: {\n    textAlign: 'right'\n  },\n  textField: {\n    marginLeft: theme.spacing(1),\n    marginRight: theme.spacing(1),\n    textAlign: 'right',\n    width: 150\n  },\n\n  icon: {\n    margin: theme.spacing(1)\n  },\n  buttonProgress: {\n    color: green[500],\n    position: 'absolute',\n    top: '50%',\n    left: '50%',\n    marginTop: -12,\n    marginLeft: -12\n  },\n  menu: {\n    width: 150\n  },\n  rowRener: {\n    border: 1,\n    borderRadius: 3\n  }\n}));\n\nconst selectors = Data.Selectors;\n\nconst sortRows = (initialRows, sortColumn, sortDirection) => rows => {\n  const comparer = (a, b) => {\n    if (sortDirection === 'ASC') {\n      return a[sortColumn] > b[sortColumn] ? 1 : -1;\n    } else if (sortDirection === 'DESC') {\n      return a[sortColumn] < b[sortColumn] ? 1 : -1;\n    }\n  };\n  return sortDirection === 'NONE' ? initialRows : [...rows].sort(comparer);\n};\n\nconst handleFilterChange = filter => filters => {\n  const newFilters = { ...filters };\n  if (filter.filterTerm) {\n    newFilters[filter.column.key] = filter;\n  } else {\n    delete newFilters[filter.column.key];\n  }\n  return newFilters;\n};\n\nfunction getValidFilterValues(rows, columnId) {\n  return rows\n    .map(r => r[columnId])\n    .filter((item, i, a) => {\n      return i === a.indexOf(item);\n    });\n}\n\nfunction getRows(rows, filters) {\n  return selectors.getRows({ rows, filters });\n}\n\nconst RowRenderer = ({ row, renderBaseRow, ...props }) => {\n  const rowToRender = {\n    ...row,\n    lastModified: moment(row.lastModified).format('DD/MM/YYYY HH:MM:SS')\n  };\n  const color = props.idx % 2 ? '#eee' : '#555';\n  return (\n    <div style={{ backgroundColor: color }}>{renderBaseRow({ ...props, row: rowToRender })}</div>\n  );\n};\n\nfunction GenericTab({\n  originalRows,\n  setOriginalRows,\n  rows,\n  setMainRows,\n  genericSaveButtonColor,\n  setGenericSaveButtonColor,\n  type,\n  userStatus,\n  role,\n  uid\n}) {\n  const [selectedIndexes, setSelectedIndexes] = useState([]);\n  const [filters, setFilters] = useState({});\n  let [rowsCopy, setRows] = useState(rows);\n  const [loading, setLoading] = useState(false);\n  const [loadingPage, setLoadingPage] = useState(true);\n  const [msgState, setMsgState] = useState({ title: '', body: '', visible: false });\n  const [formState, setFormState] = useState({\n    firstNameErr: false,\n    lastNameErr: false,\n    genderErr: false,\n    phoneErr: false\n  });\n  const [openForm, setOpenForm] = useState(false);\n  let filteredRows = getRows(rowsCopy, filters);\n  const [newRow, setNewRow] = useState({});\n  const [loadingSave, setLoadingSave] = useState(false);\n  const [loadingAdd, setLoadingAdd] = useState(false);\n  const [openDeleteCheck, setOpenDeleteCheck] = useState(false);\n  const [usersPhones, setUsersPhones] = useState([]);\n\n  const fixRowFields = row => {\n    columns.forEach(({ key }) => {\n      if (row.hasOwnProperty(key)) {\n        if (\n          key === 'lastModified' &&\n          row[key] !== undefined &&\n          row[key] !== null &&\n          row[key] !== ''\n        ) {\n          row[key] = row[key] instanceof Date ? row[key] : row[key].toDate();\n        }\n        if (row[key] === null || row[key] === undefined || key === 'dob') {\n          row[key] = '';\n        }\n      } else {\n        row = { ...row, [key]: '' };\n      }\n    });\n    return row;\n  };\n\n  const fixRowsFields = arr => {\n    return arr.map(fixRowFields);\n  };\n\n  function checkIfUserExist(phone) {\n    return usersPhones.includes(phone);\n  }\n\n  function isValidPhone(phone) {\n    if (phone.length === 13) return true;\n    return false;\n  }\n\n  const onGridRowsUpdated = ({ fromRow, toRow, updated }) => {\n    if (updated.phone !== undefined) {\n      if (!isValidPhone(updated.phone)) {\n        setMsgState({\n          title: ' ',\n          body: '!   ',\n          visible: true\n        });\n        return;\n      }\n      if (checkIfUserExist(updated.phone)) {\n        setMsgState({\n          title: ' ',\n          body: '!   ',\n          visible: true\n        });\n        return;\n      }\n    }\n    setGenericSaveButtonColor('secondary');\n    const newRows = deepcopy(rowsCopy);\n    for (let i = 0; i < newRows.length; i++) {\n      if (i >= fromRow && i <= toRow) {\n        newRows[i] = { ...rowsCopy[i], ...updated };\n        newRows[i].lastModified = updateDate();\n      } else {\n        newRows[i].lastModified = new Date(newRows[i].lastModified);\n      }\n    }\n    setRows(newRows);\n    setMainRows(newRows);\n  };\n\n  const updateDate = () => {\n    return new Date();\n  };\n\n  const updateNums = () => {\n    for (let i = 0; i < rowsCopy.length; i++) {\n      rowsCopy[i].id = i + 1;\n    }\n    setRows(rowsCopy);\n    setMainRows(rowsCopy);\n  };\n\n  const handleChange = name => event => {\n    let fieldName = name + 'Err';\n    setFormState({ ...formState, [fieldName]: false });\n    setNewRow({ ...newRow, [name]: event.target.value });\n  };\n\n  const handleChangePhone = name => value => {\n    setFormState({ ...formState, phoneErr: false });\n    setNewRow({ ...newRow, [name]: value });\n  };\n\n  function handleClickOpenForm() {\n    setNewRow({ id: rowsCopy.length, lastModified: updateDate(), ...newRow });\n    setOpenForm(true);\n  }\n\n  function handleCloseForm() {\n    setOpenForm(false);\n    setNewRow({});\n  }\n\n  function handleOpenCheckDelete() {\n    if (selectedIndexes.length > 0) setOpenDeleteCheck(true);\n  }\n  function handleCloseCheckDelete() {\n    setOpenDeleteCheck(false);\n  }\n\n  const deleteRow = () => {\n    if (selectedIndexes.length === 0) return;\n    if (!loading) {\n      setLoading(true);\n      const fids = [];\n      selectedIndexes.forEach(idx => fids.push(rowsCopy[idx].fid));\n      fids.forEach(id => firestoreModule.deleteUser(id));\n      let newArr = rowsCopy.filter((row, i) => !selectedIndexes.includes(i));\n      while (selectedIndexes.length !== 0) {\n        selectedIndexes.shift();\n      }\n      rowsCopy = newArr;\n      setRows(rowsCopy);\n      setMainRows(rowsCopy);\n      setLoading(false);\n      handleCloseCheckDelete();\n      if (type === 'tutors')\n        setMsgState({\n          title: ' ',\n          body: '!    ',\n          visible: true\n        });\n      else if (type === 'coordinators')\n        setMsgState({\n          title: ' ',\n          body: '!    ',\n          visible: true\n        });\n      else if (type === 'departmentManagers')\n        setMsgState({\n          title: '  ',\n          body: '!    ',\n          visible: true\n        });\n      setGenericSaveButtonColor('secondary');\n      updateNums();\n    }\n  };\n\n  const removeUnnecessaryFields = row => {\n    delete row.check;\n    delete row.id;\n    delete row.fid;\n  };\n\n  function formValidation() {\n    if (newRow.firstName === '' || !newRow.hasOwnProperty('firstName')) {\n      setFormState({ firstNameErr: true });\n      return;\n    } else {\n      setFormState({ firstNameErr: false });\n    }\n    if (newRow.lastName === '' || !newRow.hasOwnProperty('lastName')) {\n      setFormState({ lastNameErr: true });\n      return;\n    } else {\n      setFormState({ lastNameErr: false });\n    }\n    if (newRow.gender === '' || !newRow.hasOwnProperty('gender')) {\n      setFormState({ genderErr: true });\n      return;\n    } else {\n      setFormState({ genderErr: false });\n    }\n    if (newRow.phone === '' || !newRow.hasOwnProperty('phone') || newRow.phone === undefined) {\n      setFormState({ phoneErr: true });\n      return;\n    } else {\n      setFormState({ phoneErr: false });\n    }\n\n    if (newRow.phone && !isValidPhone(newRow.phone)) {\n      setMsgState({\n        title: ' ',\n        body: '!   ',\n        visible: true\n      });\n      return;\n    }\n    if (checkIfUserExist(newRow.phone)) {\n      if (type === 'tutors')\n        setMsgState({\n          title: ' ',\n          body: '!   ',\n          visible: true\n        });\n      else if (type === 'coordinators')\n        setMsgState({\n          title: ' ',\n          body: '!   ',\n          visible: true\n        });\n      else if (type === 'departmentManagers')\n        setMsgState({\n          title: '  ',\n          body: '!   ',\n          visible: true\n        });\n      return;\n    }\n    addRow();\n  }\n\n  checkIfUserExist(newRow.phone);\n\n  const addRow = () => {\n    setLoadingAdd(true);\n    handleCloseForm();\n    let fixedRow = fixRowFields(newRow);\n    removeUnnecessaryFields(fixedRow);\n    fixedRow = addOwners(role, uid, userStatus.owners, type, fixedRow);\n    fixedRow = removeEmptyFields(fixedRow);\n    firestoreModule\n      .getUsers()\n      .add(fixedRow)\n      .then(ref => {\n        fixedRow = { ...fixedRow, fid: ref.id };\n        fixedRow = fixRowFields(fixedRow);\n        fixedRow = addOwners(role, uid, userStatus.owners, type, fixedRow);\n\n        rowsCopy.unshift(fixedRow);\n\n        updateNums();\n        setRows(rowsCopy);\n        setMainRows(rowsCopy);\n        if (type === 'tutors')\n          setMsgState({\n            title: ' ',\n            body: '!  ',\n            visible: true\n          });\n        else if (type === 'coordinators')\n          setMsgState({\n            title: ' ',\n            body: '!  ',\n            visible: true\n          });\n        else if (type === 'departmentManagers')\n          setMsgState({\n            title: '  ',\n            body: '!  ',\n            visible: true\n          });\n        setGenericSaveButtonColor('secondary');\n        setLoadingAdd(false);\n      })\n      .catch(function (error) {\n        console.log('Error adding', error);\n      });\n  };\n\n  const classes = useStyles();\n\n  const onRowsSelected = rows => {\n    setSelectedIndexes(selectedIndexes.concat(rows.map(r => r.rowIdx)));\n  };\n\n  const onRowsDeselected = rows => {\n    let rowIndexes = rows.map(r => r.rowIdx);\n    const newSelectedIndexes = selectedIndexes.filter(i => rowIndexes.indexOf(i) === -1);\n    setSelectedIndexes(newSelectedIndexes);\n  };\n\n  const getAppropriateSelect = () => {\n    if (type === 'tutors') return selectedIndexes.length === 1 ? ' ' : ' ';\n    if (type === 'coordinators') return selectedIndexes.length === 1 ? ' ' : ' ';\n    if (type === 'departmentManagers')\n      return selectedIndexes.length === 1 ? ' ' : ' ';\n  };\n  const rowText = getAppropriateSelect();\n\n  const columnsToShow = [...columns];\n\n  const rowToArr = row => columns.map(r => row[r.key]);\n\n  const exportToExcel = () => {\n    const columnNames = columns.map(r => r.name);\n    const aoa = [columnNames].concat(rowsCopy.map(rowToArr));\n    if (type === 'tutors') aoaToFile({ fileName: ' ', aoa });\n    if (type === 'coordinators') aoaToFile({ fileName: ' ', aoa });\n    if (type === 'departmentManagers') aoaToFile({ fileName: '  ', aoa });\n  };\n\n  const firstTimeLoading = () => {\n    updateNums();\n    getUsersPhones(setUsersPhones);\n    let newRows = fixRowsFields(rowsCopy);\n    setRows([...newRows]);\n    setMainRows([...rowsCopy]);\n    setLoadingPage(false);\n  };\n  if (loadingPage) firstTimeLoading();\n\n  const deleteUnnecessaryRow = () => {\n    let fids = rowsCopy.map(row => row.fid);\n    originalRows = originalRows.filter(row => fids.includes(row.fid));\n    setOriginalRows([...originalRows]);\n  };\n\n  const getRowsToUpdate = () => {\n    let ids = [];\n    let rows = [];\n    rowsCopy.map(row => ids.push({ id: row.id - 1, fid: row.fid }));\n    for (let i = 0; i < originalRows.length; i++) {\n      for (let j = 0; j < ids.length; j++) {\n        if (originalRows[i].fid === ids[j].fid) {\n          if (rowsCopy[ids[j].id] !== undefined) {\n            if (originalRows[i].lastModified instanceof Date) {\n              if (\n                originalRows[i].lastModified.getTime() !==\n                new Date(rowsCopy[ids[j].id].lastModified).getTime()\n              )\n                rows.push(rowsCopy[ids[j].id]);\n            } else {\n              if (\n                originalRows[i].lastModified.toDate().getTime() !==\n                new Date(rowsCopy[ids[j].id].lastModified).getTime()\n              )\n                rows.push(rowsCopy[ids[j].id]);\n            }\n          }\n        }\n      }\n    }\n    return rows;\n  };\n\n  const makeUpdate = arr => {\n    arr.forEach(row => {\n      let temp = { ...row };\n      removeUnnecessaryFields(temp);\n      temp = removeEmptyFields(temp);\n      firestoreModule.getSpecificUser(row.fid).set(temp);\n    });\n  };\n  const saveUpdates = () => {\n    setLoadingSave(true);\n    if (originalRows.length !== rowsCopy.length) deleteUnnecessaryRow();\n    let arr = getRowsToUpdate();\n    if (arr.length > 0) makeUpdate(arr);\n    let newRows = fixRowsFields(rowsCopy);\n    setRows(newRows);\n    setOriginalRows(newRows);\n    setMainRows(newRows);\n    updateNums();\n    setLoadingSave(false);\n    setGenericSaveButtonColor('default');\n    setMsgState({\n      title: ' ',\n      body: '   ',\n      visible: true\n    });\n  };\n\n  return (\n    <div>\n      <div className={classes.actionsContainer}>\n        <div className={classes.actions}>\n          <Button\n            style={{ color: '#0089c6', border: 3, borderStyle: 'solid' }}\n            variant=\"outlined\"\n            disabled={loadingAdd}\n            className={classes.button}\n            onClick={() => handleClickOpenForm()}\n            size=\"large\">\n            {type === 'tutors' && ' '}\n            {type === 'coordinators' && '  '}\n            {type === 'departmentManagers' && '  '}\n            <AddIcon />\n            {loadingAdd && <CircularProgress size={24} className={classes.buttonProgress} />}\n          </Button>\n          <MsgToShow\n            {...msgState}\n            handleClose={() => setMsgState({ ...msgState, visible: false })}\n          />\n          <Dialog\n            disableBackdropClick\n            disableEscapeKeyDown\n            open={openForm}\n            onClose={handleCloseForm}\n            aria-labelledby=\"form-dialog-title\">\n            <form validate=\"true\" autoComplete=\"on\">\n              <DialogTitle id=\"form-dialog-title\" className={classes.formTitle}>\n                {type === 'tutors' && ' '}\n                {type === 'coordinators' && '  '}\n                {type === 'departmentManagers' && '  '}\n              </DialogTitle>\n              <DialogContent>\n                <DialogContentText className={classes.formText}>\n                  **      **\n                </DialogContentText>\n                <TextField\n                  required\n                  autoFocus\n                  error={formState.firstNameErr}\n                  variant=\"outlined\"\n                  margin=\"dense\"\n                  id=\"firstName\"\n                  className={classes.textField}\n                  placeholder=\"\"\n                  label=\" \"\n                  type=\"name\"\n                  onChange={handleChange('firstName')}\n                />\n                <TextField\n                  required\n                  variant=\"outlined\"\n                  error={formState.lastNameErr}\n                  margin=\"dense\"\n                  id=\"lastName\"\n                  className={classes.textField}\n                  placeholder=\"\"\n                  label=\" \"\n                  type=\"name\"\n                  onChange={handleChange('lastName')}\n                />\n                <TextField\n                  required\n                  select\n                  id=\"gender\"\n                  error={formState.genderErr}\n                  variant=\"outlined\"\n                  margin=\"dens\"\n                  label=\"\"\n                  className={classes.textField}\n                  onChange={handleChange('gender')}\n                  value={newRow.gender}\n                  SelectProps={{\n                    MenuProps: {\n                      className: classes.menu\n                    }\n                  }}>\n                  {genders.map(option => (\n                    <MenuItem key={option.value} value={option.value}>\n                      {option.label}\n                    </MenuItem>\n                  ))}\n                </TextField>\n                <PhoneInput\n                  required\n                  country=\"IL\"\n                  error={formState.phoneErr}\n                  label=\"' \"\n                  placeholder=\"\"\n                  className={classes.textField}\n                  value={newRow.phone}\n                  onChange={handleChangePhone('phone')}\n                />\n              </DialogContent>\n              <DialogActions>\n                <Button onClick={handleCloseForm} color=\"secondary\" size=\"large\">\n                  \n                </Button>\n                <Button onClick={() => formValidation()} color=\"primary\" size=\"large\">\n                  \n                </Button>\n              </DialogActions>\n            </form>\n          </Dialog>\n        </div>\n\n        <div className={classes.actions}>\n          <Button\n            style={{ color: '#0089c6', border: 3, borderStyle: 'solid' }}\n            variant=\"outlined\"\n            size=\"large\"\n            className={classes.button}\n            onClick={() => exportToExcel()}>\n             \n            <SaveIcon />\n          </Button>\n        </div>\n\n        <div className={classes.saveContainer}>\n          <Button\n            style={{ border: 3, borderStyle: 'solid' }}\n            variant=\"outlined\"\n            size=\"large\"\n            color={genericSaveButtonColor}\n            className={classes.button}\n            onClick={() => (genericSaveButtonColor === 'secondary' ? saveUpdates() : {})}\n            disabled={loadingSave}>\n             \n            <SaveIcon />\n            {loadingSave && <CircularProgress size={24} className={classes.buttonProgress} />}\n          </Button>\n        </div>\n      </div>\n\n      <ReactDataGrid\n        rowKey=\"id\"\n        columns={columnsToShow.reverse()}\n        rowGetter={i => filteredRows[i]}\n        rowsCount={filteredRows.length}\n        minHeight={350}\n        toolbar={<Toolbar enableFilter={true} />}\n        onAddFilter={filter => setFilters(handleFilterChange(filter))}\n        onClearFilters={() => setFilters({})}\n        getValidFilterValues={columnKey => getValidFilterValues(rowsCopy, columnKey)}\n        onGridSort={(sortColumn, sortDirection) =>\n          setRows(sortRows(rowsCopy, sortColumn, sortDirection))\n        }\n        onGridRowsUpdated={onGridRowsUpdated}\n        rowRenderer={RowRenderer}\n        enableCellSelect={true}\n        rowSelection={{\n          showCheckbox: true,\n          enableShiftSelect: true,\n          onRowsSelected: onRowsSelected,\n          onRowsDeselected: onRowsDeselected,\n          selectBy: {\n            indexes: selectedIndexes\n          }\n        }}\n      />\n\n      {selectedIndexes.length !== 0 ? (\n        <div className={classes.actionsContainer}>\n          <List\n            component=\"nav\"\n            className={classes.root}\n            style={{ maxWidth: 250, border: 3, borderColor: 'black' }}>\n            <ListItem button onClick={handleOpenCheckDelete} disabled={loading}>\n              <ListItemIcon>\n                <DeleteIcon />\n              </ListItemIcon>\n              {type === 'tutors' && (\n                <ListItemText primary=\"  \" style={{ textAlign: 'right' }} />\n              )}\n              {type === 'coordinators' && (\n                <ListItemText primary=\"  \" style={{ textAlign: 'right' }} />\n              )}\n              {type === 'departmentManagers' && (\n                <ListItemText primary=\"  \" style={{ textAlign: 'right' }} />\n              )}\n\n              {loading && <CircularProgress size={24} className={classes.buttonProgress} />}\n            </ListItem>\n\n            <Dialog\n              disableBackdropClick\n              disableEscapeKeyDown\n              open={openDeleteCheck}\n              onClose={handleCloseCheckDelete}>\n              <DialogTitle className={classes.formTitle}>\n                {type === 'tutors' && ' '}\n                {type === 'coordinators' && ' '}\n                {type === 'departmentManagers' && ' '}\n              </DialogTitle>\n              <DialogContent>\n                <DialogContentText className={classes.formText}>\n                  {type === 'tutors' && '      '}\n                  {type === 'coordinators' && '      '}\n                  {type === 'departmentManagers' && '      '}\n                </DialogContentText>\n              </DialogContent>\n              <DialogActions>\n                <Button\n                  onClick={handleCloseCheckDelete}\n                  color=\"primary\"\n                  className={classes.button}\n                  size=\"large\">\n                  \n                </Button>\n                <Button\n                  onClick={deleteRow}\n                  color=\"secondary\"\n                  className={classes.button}\n                  size=\"large\">\n                  \n                </Button>\n              </DialogActions>\n            </Dialog>\n          </List>\n\n          <List className={classes.saveContainer}>\n            <Typography style={{ color: '#3F51B5', font: 30 }} variant=\"subtitle1\">\n              {selectedIndexes.length} {rowText}\n            </Typography>\n          </List>\n        </div>\n      ) : null}\n    </div>\n  );\n}\n\nexport { GenericTab };\n","import React from 'react';\nimport { checkIfAllFieldsHaveValue } from '../utils/general-utils';\nimport {\n  AppBar,\n  Toolbar,\n  Typography,\n  Button,\n  CardContent,\n  NativeSelect,\n  Table,\n  TableCell,\n  TableBody,\n  TableRow\n} from '@material-ui/core';\nimport { MsgToShow } from './';\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\n\nconst mandatoryRows = ['firstName', 'lastName', 'gender'];\nconst rows = [\n  'i',\n  'lastName',\n  'firstName',\n  'groups',\n  'phone',\n  'gender',\n  'schoolGrade',\n  'school',\n  'address',\n  'neighborhood',\n  'dob',\n  'govID',\n  'city',\n  'email',\n  'shirtSize',\n  'friends',\n  'socialCircle',\n  'youthGroup',\n  'interests',\n  'specialIssues',\n  'prefferedDays',\n  'staffMemberAppointed',\n  'comments'\n];\nclass Select extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      lastName: '',\n      firstName: '',\n      groups: '',\n      phone: '',\n      gender: '',\n      schoolGrade: '',\n      school: '',\n      address: '',\n      neighborhood: '',\n      dob: '',\n      govID: '',\n      city: '',\n      email: '',\n      shirtSize: '',\n      friends: '',\n      socialCircle: '',\n      youthGroup: '',\n      interests: '',\n      specialIssues: '',\n      prefferedDays: '',\n      staffMemberAppointed: '',\n      comments: '',\n      i: '',\n      send: false,\n      msgState: { title: '', body: '', visible: false }\n    };\n  }\n\n  handleChange = name => event => {\n    this.setState({ [name]: event.target.value });\n  };\n\n  getLabel = str => {\n    switch (str) {\n      case 'i':\n        return '  ';\n      case 'lastName':\n        return ' ';\n      case 'firstName':\n        return ' ';\n      case 'phone':\n        return '';\n      case 'groups':\n        return '';\n      case 'gender':\n        return '';\n      case 'schoolGrade':\n        return '';\n      case 'school':\n        return '  ';\n      case 'address':\n        return '';\n      case 'neighborhood':\n        return '';\n      case 'dob':\n        return ' ';\n      case 'govID':\n        return ' ';\n      case 'city':\n        return '';\n      case 'email':\n        return '';\n      case 'friends':\n        return '';\n      case 'shirtSize':\n        return ' ';\n      case 'socialCircle':\n        return ' ';\n      case 'youthGroup':\n        return ' ';\n      case 'interests':\n        return ' ';\n      case 'specialIssues':\n        return ' ';\n      case 'prefferedDays':\n        return ' ';\n      case 'staffMemberAppointed':\n        return '  ';\n      case 'comments':\n        return '';\n      default:\n        return null;\n    }\n  };\n\n  checkDisabled = str => {\n    if (str === 'i') {\n      return false;\n    }\n    return Object.values(this.state).includes(str);\n  };\n\n  chosen = (obj, name) => {\n    return obj[name] && obj[name] !== '  ';\n  };\n\n  handleClickOpen = () => {\n    let canSend = checkIfAllFieldsHaveValue(mandatoryRows, this.state, this.chosen);\n\n    if (canSend === true) {\n      const [, ...rest] = rows;\n      this.props.onSelectingDone(\n        rest\n          .filter(row => this.chosen(this.state, row))\n          .map(existingName => [existingName, this.state[existingName]])\n      );\n      this.setState({ send: true });\n    }\n\n    if (!canSend) {\n      this.setState({\n        msgState: {\n          title: '  ',\n          body: '            ',\n          visible: true\n        }\n      });\n    }\n\n    if (canSend) {\n      this.setState({\n        msgState: {\n          title: ' ',\n          body: '  ',\n          visible: true\n        }\n      });\n    }\n  };\n\n  handleClose = () => {\n    this.setState({ send: false });\n  };\n\n  render() {\n    const classes = {\n      textField: {\n        marginLeft: 100,\n\n        width: 1000\n      },\n      dense: {\n        marginTop: 19\n      }\n    };\n\n    return (\n      <div>\n        <AppBar position=\"static\">\n          <Toolbar>\n            <Button\n              align=\"right\"\n              color=\"secondary\"\n              style={{ width: 150, height: 50, position: 'relative', float: 'left', margin: 20 }}\n              variant=\"contained\"\n              className={classes.button}\n              onClick={this.handleClickOpen}>\n              <ChevronLeftIcon style={{ marginRight: 20 }} />\n               \n            </Button>\n            <Typography variant=\"h6\" style={{ flexGrow: 1 }} />\n            <h2 color=\"inherit\" style={{ flexGrow: 1 }}>\n               \n            </h2>\n          </Toolbar>\n        </AppBar>\n\n        <CardContent>\n          <Table style={{ width: '100%', marginLeft: 'auto', marginRight: 'auto' }}>\n            <TableBody>\n              <TableRow style={{ width: 'auto', marginLeft: 'auto', marginRight: 'auto' }}>\n                <TableCell component=\"th\" scope=\"row\" />\n                <TableCell align=\"center\">    </TableCell>\n                <TableCell align=\"center\">   </TableCell>\n              </TableRow>\n              {rows.map(row =>\n                row !== 'i' ? (\n                  <TableRow\n                    key={row}\n                    style={{ width: '100%', marginLeft: 'auto', marginRight: 'auto' }}>\n                    <TableCell component=\"th\" scope=\"row\" />\n                    <TableCell align=\"center\">\n                      <NativeSelect\n                        className={classes.selectEmpty}\n                        value={this.state[row]}\n                        name={row}\n                        onChange={this.handleChange(row)}\n                        inputProps={{ 'aria-label': 'age' }}>\n                        {this.props.fileRows.map(row => (\n                          <option key={row} disabled={this.checkDisabled(row)} value={row}>\n                            {row}\n                          </option>\n                        ))}\n                      </NativeSelect>\n                    </TableCell>\n                    <TableCell align=\"center\">\n                      {mandatoryRows.includes(row) ? '* ' + this.getLabel(row) : this.getLabel(row)}\n                    </TableCell>\n                  </TableRow>\n                ) : null\n              )}\n            </TableBody>\n          </Table>\n        </CardContent>\n        <MsgToShow\n          {...this.state.msgState}\n          handleClose={() => {\n            if (this.state.send) this.props.uploadedFinished(false);\n            this.setState({ msgState: { ...this.state.msgState, visible: false } });\n          }}\n        />\n      </div>\n    );\n  }\n}\n\nexport default Select;\n","import React, { Component } from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport Select from '../components/Select';\nimport { entriesToObj } from './general-utils'\nimport Dropzone from '../components/Dropzone';\n\nclass Upload extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            aoo: [],\n            selecting: false,\n            uploading: false,\n            uploadProgress: {},\n            successfullUploaded: false,\n        };\n    }\n\n    aoaToAoo(aoa) {\n        const [columnsNames, ...data] = aoa;\n        return data.map((row) => entriesToObj(row.map((cellVal, idx) => [columnsNames[idx], cellVal])))\n    }\n\n    render() {\n\n        return (\n\n            <div style={{width: '1000'}}>\n                {this.state.selecting ? <Select uploadedFinished={(val) => this.setState({ selecting: val })} onSelectingDone={(fileRowsToTableRows) => {\n                    this.props.onNewFile(this.state.aoo.map(obj => entriesToObj(fileRowsToTableRows.map(([tableName, fileName]) => [tableName, obj[fileName]]))))\n                }} fileRows={Object.keys(this.state.aoo[0])} /> : <div>\n                        <Dropzone onGetFile={(aoa) => this.setState({ aoo: this.aoaToAoo(aoa), selecting: aoa.length > 0, successfullUploaded: aoa.length > 0 })} />\n                        <Typography align='center' style={{ fontSize: 40, color: '#41ad48' }}> /   </Typography>\n                    </div>\n                }\n\n            </div>\n        )\n    }\n}\nexport default Upload;","import React, { useState } from 'react';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport RadioGroup from '@material-ui/core/RadioGroup';\r\nimport Radio from '@material-ui/core/Radio';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport { EnhancedTable } from '../components';\r\nimport { Box, Button, makeStyles } from '@material-ui/core';\r\nimport SaveIcon from '@material-ui/icons/Save';\r\nimport green from '@material-ui/core/colors/green';\r\nimport MonthPickerInput from 'react-month-picker-input';\r\nimport { firestoreModule } from '../Firebase/Firebase';\r\nimport { zip } from '../utils/general-utils';\r\nimport { toMoment } from '../utils/date-utils';\r\nimport { totalHoursWorked } from '../utils/local-db';\r\nimport { aoaToFile } from '../utils/excell-utils';\r\nimport _ from 'lodash';\r\nimport moment from 'moment';\r\n\r\nrequire('react-month-picker-input/dist/react-month-picker-input.css');\r\n\r\nconst orderAndLabelsOfStatsInReport = [\r\n  { name: 'totalHoursWorked', label: '   ?' },\r\n  { name: 'studentsInYourCare', label: '   ?' },\r\n  { name: 'studentsDiscussedWith', label: '        ?' },\r\n  {\r\n    name: 'studentsWhoSharedProblems',\r\n    label: '        ? (    ?)'\r\n  },\r\n  {\r\n    name: 'studentsWhoAttendedContentGroupActivity',\r\n    label: '        ? (     )'\r\n  },\r\n  {\r\n    name: 'groupActivitiesWithAdmirablePerson',\r\n    label: '      ?  (   )'\r\n  },\r\n  {\r\n    name: 'regiousGroupActivities',\r\n    label:\r\n      \"   /  /     ( ,  ,   , , ,    ,   -  ,    ,  ')\"\r\n  }\r\n];\r\n\r\nconst ReportsTabScene = props => {\r\n  const rows = props.tutor ? null : props.tutors.filter(({ fid }) => fid);\r\n  const [reportType, setReportType] = useState('monthlyReport');\r\n  const [selectedDate, setSelectedDate] = useState({\r\n    selectedMonth: new Date().getMonth(),\r\n    selectedYear: new Date().getFullYear()\r\n  });\r\n  const [selected, setSelected] = useState([]);\r\n\r\n  const [isFetchingReport, setIsFetchingReport] = useState(false);\r\n\r\n  const classes = useStyles();\r\n\r\n  const fetchReports = () => {\r\n    setIsFetchingReport(true);\r\n    let month = null;\r\n    if (reportType === 'monthlyReport')\r\n      month = new Date(selectedDate.selectedYear, selectedDate.selectedMonth);\r\n\r\n    firestoreModule\r\n      .getAttendance(props.tutor ? [props.tutor.fid] : selected, month)\r\n      .then(results => {\r\n        if (results.length === 0) {\r\n          throw new Error('no results!');\r\n        }\r\n        const aoaOfUIDs = results.map(resultsOfUID => {\r\n          const objOfMonthsToShifts = _.groupBy(resultsOfUID, ({ startTime }) =>\r\n            toMoment(startTime).format('YYYY-MM')\r\n          );\r\n          const sortedMonths = _.sortBy(Object.entries(objOfMonthsToShifts), ([month]) =>\r\n            moment(month)\r\n          ).map(([month]) => month);\r\n\r\n          const entries = Object.entries(objOfMonthsToShifts)\r\n            .map(([month, shifts]) => {\r\n              const totalHoursWorkedInMonth = totalHoursWorked(shifts);\r\n              const fixedShiftDates = shifts.map(\r\n                ({ activities, startTime, endTime }) => ({\r\n                  activities,\r\n                  startTime: toMoment(startTime),\r\n                  endTime: toMoment(endTime)\r\n                })\r\n              );\r\n              const sortedShifts = fixedShiftDates.sort((shiftA, shiftB) =>\r\n                shiftA.startTime > shiftB.startTime ? 1 : -1\r\n              );\r\n              const sortedShiftsWithGroupActivities = sortedShifts.filter(\r\n                ({ activities }) => _.some(activities, ['type', ' '])\r\n              );\r\n              const sortedShiftsWithDiscussion = sortedShifts.filter(({ activities }) =>\r\n                _.some(activities, ['type', ' '])\r\n              );\r\n              const discussionExists = sortedShiftsWithDiscussion.length !== 0;\r\n\r\n              const groupActivitiesExist = sortedShiftsWithGroupActivities.length !== 0;\r\n\r\n              let studentsInYourCare;\r\n              let studentsWhoAttendedContentGroupActivity;\r\n              let groupActivitiesWithAdmirablePerson;\r\n              let regiousGroupActivities;\r\n              if (groupActivitiesExist) {\r\n                const lastShiftWithGroupActivity =\r\n                  sortedShiftsWithGroupActivities[\r\n                  sortedShiftsWithGroupActivities.length - 1\r\n                  ];\r\n                studentsInYourCare = _.union(\r\n                  ..._.find(lastShiftWithGroupActivity.activities, [\r\n                    'type',\r\n                    ' '\r\n                  ]).groups.map(({ participants }) => participants.map(({ uid }) => uid))\r\n                ).length;\r\n                studentsWhoAttendedContentGroupActivity = _.union(\r\n                  _.flatMapDeep(\r\n                    sortedShiftsWithGroupActivities.map(({ activities }) =>\r\n                      activities\r\n                        .filter(({ subtype }) => subtype === ' ')\r\n                        .map(({ groups }) =>\r\n                          groups\r\n                            .filter(({ attended }) => attended)\r\n                            .map(({ participants }) =>\r\n                              participants\r\n                                .filter(({ attended }) => attended)\r\n                                .map(({ uid }) => uid)\r\n                            )\r\n                        )\r\n                    )\r\n                  )\r\n                ).length;\r\n              }\r\n              groupActivitiesWithAdmirablePerson = _.sum(\r\n                sortedShiftsWithGroupActivities.map(\r\n                  ({ activities }) =>\r\n                    activities.filter(({ subtype }) => subtype === '   ')\r\n                      .length\r\n                )\r\n              );\r\n              regiousGroupActivities = _.sum(\r\n                sortedShiftsWithGroupActivities.map(\r\n                  ({ activities }) =>\r\n                    activities.filter(\r\n                      ({ subtype }) => subtype === '   /  / '\r\n                    ).length\r\n                )\r\n              );\r\n              let studentsDiscussedWith;\r\n              let studentsWhoSharedProblems;\r\n              if (discussionExists) {\r\n                const discussionActivities = _.union(\r\n                  ...sortedShiftsWithDiscussion.map(({ activities }) =>\r\n                    activities.filter(({ type }) => type === ' ')\r\n                  )\r\n                );\r\n                studentsDiscussedWith = _.union(\r\n                  discussionActivities.map(({ student }) => student.uid)\r\n                ).length;\r\n                studentsWhoSharedProblems = _.union(\r\n                  discussionActivities\r\n                    .filter(({ subtype }) => subtype === '/')\r\n                    .map(({ student }) => student.uid)\r\n                ).length;\r\n              }\r\n              return [\r\n                month,\r\n                {\r\n                  totalHoursWorked: _.ceil(totalHoursWorkedInMonth, 1),\r\n                  studentsInYourCare: groupActivitiesExist\r\n                    ? studentsInYourCare\r\n                    : undefined,\r\n                  studentsDiscussedWith: discussionExists\r\n                    ? studentsDiscussedWith\r\n                    : undefined,\r\n                  studentsWhoSharedProblems: discussionExists\r\n                    ? studentsWhoSharedProblems\r\n                    : undefined,\r\n                  studentsWhoAttendedContentGroupActivity: groupActivitiesExist\r\n                    ? studentsWhoAttendedContentGroupActivity\r\n                    : undefined,\r\n                  groupActivitiesWithAdmirablePerson: groupActivitiesExist\r\n                    ? groupActivitiesWithAdmirablePerson\r\n                    : undefined,\r\n                  regiousGroupActivities: groupActivitiesExist\r\n                    ? regiousGroupActivities\r\n                    : undefined\r\n                }\r\n              ];\r\n            })\r\n            .map(([month, shifts]) => _.mapValues(shifts, val => ({ [month]: val })));\r\n          _.merge(...entries);\r\n          return [[undefined].concat(sortedMonths)].concat(\r\n            orderAndLabelsOfStatsInReport.map(({ name, label }) =>\r\n              [label].concat(sortedMonths.map(month => entries[0][name][month]))\r\n            )\r\n          );\r\n        });\r\n        if (reportType !== 'monthlyReport') {\r\n          return aoaOfUIDs[0];\r\n        } else {\r\n          return zip(selected, aoaOfUIDs).reduce(\r\n            (accArr, [currUID, currArr]) =>\r\n              accArr.map((row, i) => {\r\n                if (i === 0) {\r\n                  const tutor = _.find(props.tutors, ['fid', currUID]);\r\n                  return row.concat(tutor.firstName + ' ' + tutor.lastName);\r\n                } else if (currArr[i].length !== 1)\r\n                  return row.concat(currArr[i][currArr[i].length - 1]);\r\n                else return row.concat([undefined]);\r\n              }),\r\n            [[undefined]].concat(\r\n              orderAndLabelsOfStatsInReport.map(({ label }) => [label])\r\n            )\r\n          );\r\n        }\r\n      })\r\n      .then(aoa => {\r\n        setIsFetchingReport(false);\r\n        if (reportType !== 'monthlyReport') {\r\n          aoaToFile({ fileName: ' ', aoa });\r\n        } else {\r\n          aoaToFile({ fileName: '  ' + moment(month).format('MM-YYYY'), aoa });\r\n        }\r\n      })\r\n      .catch(error => {\r\n        setIsFetchingReport(false);\r\n      });\r\n  }\r\n  return (\r\n    <div style={{ padding: 50 }}>\r\n      {props.tutor ?\r\n        <Box display=\"flex\" flexDirection=\"row-reverse\">\r\n          <Button\r\n            style={{ color: '#0089c6', border: 3, borderStyle: 'solid' }}\r\n            variant=\"outlined\"\r\n            size=\"large\"\r\n            className={classes.button}\r\n            onClick={fetchReports}>\r\n              \r\n            <SaveIcon />\r\n          </Button>\r\n        </Box>\r\n        :\r\n        <Box display=\"flex\" flexDirection=\"row-reverse\">\r\n\r\n          <Box flex=\"1\" flexDirection=\"column\">\r\n            <Box style={{ textAlign: 'right', marginBottom: 10 }}>\r\n              <Typography\r\n                variant=\"h4\"\r\n                style={{ color: '#41ad48', fontFamily: 'Alef', fontWeight: 'bold' }}>\r\n                  \r\n            </Typography>\r\n            </Box>\r\n            <Box style={{ textAlign: 'right', marginBottom: 30 }}>\r\n              <FormControl component=\"fieldset\">\r\n                <RadioGroup\r\n                  aria-label=\"gender\"\r\n                  name=\"gender2\"\r\n                  value={reportType}\r\n                  onChange={event => {\r\n                    setReportType(event.target.value);\r\n                    setSelected([]);\r\n                  }}>\r\n                  <FormControlLabel\r\n                    value=\"monthlyReport\"\r\n                    control={<Radio color=\"primary\" />}\r\n                    label={'\"   '}\r\n                    labelPlacement=\"start\"\r\n                  />\r\n                  <FormControlLabel\r\n                    value=\"specificTutorReport\"\r\n                    control={<Radio color=\"primary\" />}\r\n                    label={'\"  '}\r\n                    labelPlacement=\"start\"\r\n                  />\r\n                </RadioGroup>\r\n              </FormControl>\r\n            </Box>\r\n            {reportType === 'monthlyReport' ? (\r\n              <Box style={{ textAlign: 'right' }}>\r\n                <Typography\r\n                  variant=\"h4\"\r\n                  style={{\r\n                    color: '#41ad48',\r\n                    marginBottom: 10,\r\n                    fontFamily: 'Alef',\r\n                    fontWeight: 'bold'\r\n                  }}>\r\n                   \r\n              </Typography>\r\n                <MonthPickerInput\r\n                  fontSize=\"50\"\r\n                  style={{ padding: 50 }}\r\n                  lang=\"he\"\r\n                  i18n={{\r\n                    monthFormat: 'long',\r\n                    dateFormat: { he: 'MM/YYYY' },\r\n                    monthNames: {\r\n                      he: [\r\n                        '',\r\n                        '',\r\n                        '',\r\n                        '',\r\n                        '',\r\n                        '',\r\n                        '',\r\n                        '',\r\n                        '',\r\n                        '',\r\n                        '',\r\n                        ''\r\n                      ]\r\n                    }\r\n                  }}\r\n                  year={selectedDate.selectedYear}\r\n                  month={selectedDate.selectedMonth}\r\n                  onChange={(maskedValue, selectedYear, selectedMonth) =>\r\n                    setSelectedDate({ selectedMonth, selectedYear })\r\n                  }\r\n                />\r\n              </Box>\r\n            ) : null}\r\n          </Box>\r\n          <Box flex=\"2\" flexDirection=\"column\">\r\n            <EnhancedTable\r\n              selected={selected}\r\n              handleClick={fid => {\r\n                const selectedIndex = selected.indexOf(fid);\r\n                if (reportType === 'monthlyReport') {\r\n                  let newSelected = [];\r\n                  if (selectedIndex === -1) {\r\n                    newSelected = newSelected.concat(selected, fid);\r\n                  } else if (selectedIndex === 0) {\r\n                    newSelected = newSelected.concat(selected.slice(1));\r\n                  } else if (selectedIndex === selected.length - 1) {\r\n                    newSelected = newSelected.concat(selected.slice(0, -1));\r\n                  } else if (selectedIndex > 0) {\r\n                    newSelected = newSelected.concat(\r\n                      selected.slice(0, selectedIndex),\r\n                      selected.slice(selectedIndex + 1)\r\n                    );\r\n                  }\r\n                  setSelected(newSelected);\r\n                } else {\r\n                  if (selectedIndex === -1) setSelected([fid]);\r\n                }\r\n              }}\r\n              handleSelectAll={event => {\r\n                if (event.target.checked) {\r\n                  setSelected(rows.map(n => n.fid));\r\n                } else {\r\n                  setSelected([]);\r\n                }\r\n              }}\r\n              multiSelect={reportType === 'monthlyReport'}\r\n              tableTitle={reportType === 'monthlyReport' ? ' ' : ' '}\r\n              rows={rows}\r\n              isFetchingReport={isFetchingReport}\r\n              onClickFetchReport={fetchReports}\r\n            />\r\n          </Box>\r\n        </Box>\r\n      }\r\n    </div>\r\n  );\r\n};\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    textAlign: 'center',\r\n    alignContent: 'center',\r\n    border: 3,\r\n    borderRadius: 3,\r\n    borderColor: 'black',\r\n    borderWidth: 3,\r\n    width: '100%',\r\n    maxWidth: 300\r\n  },\r\n  nested: {\r\n    paddingLeft: theme.spacing(2),\r\n    border: 3,\r\n    borderRadius: 3\r\n  },\r\n  actionsContainer: {\r\n    display: 'flex',\r\n    flexDirection: 'row-reverse'\r\n  },\r\n  actions: {\r\n    display: 'flex',\r\n    margin: theme.spacing(1),\r\n    flexDirection: 'column',\r\n    padding: 5,\r\n    marginTop: 20\r\n  },\r\n  saveContainer: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    margin: theme.spacing(1),\r\n    marginRight: 'auto',\r\n    padding: 5,\r\n    marginTop: 20,\r\n    Size: 50\r\n  },\r\n  button: {\r\n    borderRadius: 5,\r\n    fontFamily: 'Arial',\r\n    fontSize: 18,\r\n    padding: 4,\r\n    margin: theme.spacing(1),\r\n    alignContent: 'center',\r\n    textAlign: 'right'\r\n  },\r\n  formTitle: {\r\n    textAlign: 'center',\r\n    font: 30\r\n  },\r\n  formText: {\r\n    textAlign: 'right'\r\n  },\r\n  textField: {\r\n    marginLeft: theme.spacing(1),\r\n    marginRight: theme.spacing(1),\r\n    textAlign: 'right',\r\n    width: 150\r\n  },\r\n\r\n  icon: {\r\n    margin: theme.spacing(1)\r\n  },\r\n  buttonProgress: {\r\n    color: green[500],\r\n    position: 'absolute',\r\n    top: '50%',\r\n    left: '50%',\r\n    marginTop: -12,\r\n    marginLeft: -12\r\n  },\r\n  menu: {\r\n    width: 150\r\n  },\r\n  rowRener: {\r\n    border: 1,\r\n    borderRadius: 3\r\n  }\r\n}));\r\n\r\nexport default ReportsTabScene;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { TableTabScene } from '../components';\r\nimport { makeStyles, Typography, Tab, Tabs, AppBar, Button, Toolbar } from '@material-ui/core/';\r\nimport green from '@material-ui/core/colors/green';\r\nimport { GenericTab } from '../components/GenericTab';\r\nimport {\r\n  getStudents,\r\n  getTutors,\r\n  getCoordinators,\r\n  getDepartmentManagers\r\n} from '../utils/createRowData';\r\nimport StyledFirebaseAuth from 'react-firebaseui/StyledFirebaseAuth';\r\nimport firebase from 'firebase';\r\nimport Loader from 'react-loader-spinner';\r\nimport { addOwners } from '../utils/local-db';\r\nimport { firestoreModule } from '../Firebase/Firebase';\r\nimport Upload from '../utils/Upload';\r\nimport ReportsTabScene from './ReportsTabScene';\r\nimport logo from '../assets/images/tamir_logoshakuf.png';\r\nimport backG from '../assets/images/S.jpg';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    padding: theme.spacing(2, 1),\r\n    textAlign: 'right',\r\n    backgroundColor: theme.palette.background.paper,\r\n    width: '100%'\r\n  },\r\n  table: {\r\n    padding: 20,\r\n    paddingTop: 5,\r\n    borderRadius: 3\r\n  },\r\n  buttonProgress: {\r\n    color: green[500],\r\n    position: 'absolute',\r\n    top: '15%',\r\n    left: '50%',\r\n    marginTop: -12,\r\n    marginLeft: -12\r\n  },\r\n  details: {\r\n    textAlign: 'right',\r\n    backgroundColor: theme.palette.background.paper,\r\n    padding: 5\r\n  },\r\n  appBar: {\r\n    alignItems: 'center',\r\n    backgroundColor: '#F9F9F9'\r\n  },\r\n  tabLabel: {\r\n    fontFamily: 'Alef',\r\n    fontWeight: 'bold',\r\n    fontSize: 22,\r\n    color: '#41ad48'\r\n  }\r\n}));\r\n\r\nconst uiConfig = {\r\n  signInFlow: 'popup',\r\n  signInOptions: [\r\n    {\r\n      provider: firebase.auth.PhoneAuthProvider.PROVIDER_ID,\r\n      defaultCountry: 'IL'\r\n    }\r\n  ],\r\n  callbacks: {\r\n    signInSuccessWithAuthResult: () => false\r\n  }\r\n};\r\n\r\nconst popup = () => {\r\n  return 'are you sure you want to exit?';\r\n};\r\n\r\nconst MainScene = () => {\r\n  const [userStatus, setUserStatus] = useState('SignedOut');\r\n  const [loading, setLoading] = useState(true);\r\n  const [loadingTutors, setLoadingTutors] = useState(true);\r\n  const [loadingCoordinators, setLoadingCoordinators] = useState(true);\r\n  const [loadingDepartmentManagers, setLoadingDepartmentManagers] = useState(true);\r\n  const [studentsRows, setStudentsRows] = useState([]);\r\n  const [saveButtonColor, setSaveButtonColor] = useState('default');\r\n  const [tutorsSaveButtonColor, setTutorsSaveButtonColor] = useState('default');\r\n  const [coordinatorsSaveButtonColor, setCoordinatorsSaveButtonColor] = useState('default');\r\n  const [departmentManagersSaveButtonColor, setDepartmentManagersSaveButtonColor] = useState(\r\n    'default'\r\n  );\r\n  const [coordinatorsRows, setCoordinatorsRows] = useState([]);\r\n  const [tutorsRows, setTutorsRows] = useState([]);\r\n  const [departmentManagersRows, setDepartmentManagersRows] = useState([]);\r\n  const [displayedTab, setDisplayedTab] = useState('TableTabScene');\r\n  const [originalRows, setOriginalRows] = useState([]);\r\n  const [tutorsOriginalRows, setTutorsOriginalRows] = useState([]);\r\n  const [coordinatorsOriginalRows, setCoordinatorsOriginalRows] = useState([]);\r\n  const [departmentManagersOriginalRows, setDepartmentManagersOriginalRows] = useState([]);\r\n\r\n  firebase.auth().languageCode = 'iw';\r\n  let unregisterAuthObserver;\r\n  // componentDidMount\r\n  useEffect(() => {\r\n    unregisterAuthObserver = firebase.auth().onAuthStateChanged(user => {\r\n      if (user) {\r\n        setUserStatus('SignedInCheckingPermissions');\r\n        user\r\n          .getIdTokenResult()\r\n          .then(idTokenResult => {\r\n            if (idTokenResult && idTokenResult.claims && idTokenResult.claims.isRegistered) {\r\n              setUserStatus(idTokenResult.claims);\r\n            } else {\r\n              firebase\r\n                .auth()\r\n                .signOut()\r\n                .then(() => {\r\n                  setUserStatus('SignedOutPermissionDenied');\r\n                });\r\n            }\r\n          })\r\n          .catch(err => {\r\n            firebase\r\n              .auth()\r\n              .signOut()\r\n              .then(() => setUserStatus('SignedOutPermissionDenied'));\r\n            console.error(err);\r\n          });\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  // componentWillUnmount\r\n  useEffect(() => {\r\n    return () => {\r\n      unregisterAuthObserver();\r\n    };\r\n  }, []);\r\n\r\n  if (userStatus.isRegistered && loading) {\r\n    const { uid } = firebase.auth().currentUser;\r\n    const { role } = userStatus;\r\n    getStudents(setStudentsRows, setLoading, uid, role);\r\n    getStudents(setOriginalRows, setLoading, uid, role);\r\n    if (role !== 'tutor') {\r\n      getTutors(setTutorsRows, uid, setLoadingTutors, role);\r\n      getTutors(setTutorsOriginalRows, uid, setLoadingTutors, role);\r\n    }\r\n    if (role === 'departmentManager' || role === 'ceo') {\r\n      getCoordinators(setCoordinatorsRows, uid, setLoadingCoordinators, role);\r\n      getCoordinators(setCoordinatorsOriginalRows, uid, setLoadingCoordinators, role);\r\n    }\r\n    if (role === 'ceo') {\r\n      getDepartmentManagers(setDepartmentManagersRows, setLoadingDepartmentManagers);\r\n      getDepartmentManagers(setDepartmentManagersOriginalRows, setLoadingDepartmentManagers);\r\n    }\r\n  }\r\n\r\n  function handleChange(event, newValue) {\r\n    setDisplayedTab(newValue);\r\n  }\r\n\r\n  const classes = useStyles();\r\n\r\n  function getAppropriateStudentsRows() {\r\n    const { uid } = firebase.auth().currentUser;\r\n    const { role } = userStatus;\r\n\r\n    if (role === 'tutor' && !loading) {\r\n      return (\r\n        <TableTabScene\r\n          originalRows={originalRows}\r\n          setOriginalRows={setOriginalRows}\r\n          rows={studentsRows}\r\n          setMainRows={setStudentsRows}\r\n          saveButtonColor={saveButtonColor}\r\n          setSaveButtonColor={setSaveButtonColor}\r\n          userStatus={userStatus}\r\n          role={role}\r\n          uid={uid}\r\n          tutors={tutorsRows}\r\n          coordinators={coordinatorsRows}\r\n          departmentManagers={departmentManagersRows}\r\n        />\r\n      );\r\n    } else if (role === 'coordinator' && !loading && !loadingTutors) {\r\n      return (\r\n        <TableTabScene\r\n          originalRows={originalRows}\r\n          setOriginalRows={setOriginalRows}\r\n          rows={studentsRows}\r\n          setMainRows={setStudentsRows}\r\n          saveButtonColor={saveButtonColor}\r\n          setSaveButtonColor={setSaveButtonColor}\r\n          userStatus={userStatus}\r\n          role={role}\r\n          uid={uid}\r\n          tutors={tutorsRows}\r\n          coordinators={coordinatorsRows}\r\n          departmentManagers={departmentManagersRows}\r\n        />\r\n      );\r\n    } else if (role === 'departmentManager' && !loading && !loadingTutors && !loadingCoordinators) {\r\n      return (\r\n        <TableTabScene\r\n          originalRows={originalRows}\r\n          setOriginalRows={setOriginalRows}\r\n          rows={studentsRows}\r\n          setMainRows={setStudentsRows}\r\n          saveButtonColor={saveButtonColor}\r\n          setSaveButtonColor={setSaveButtonColor}\r\n          userStatus={userStatus}\r\n          role={role}\r\n          uid={uid}\r\n          tutors={tutorsRows}\r\n          coordinators={coordinatorsRows}\r\n          departmentManagers={departmentManagersRows}\r\n        />\r\n      );\r\n    } else if (\r\n      role === 'ceo' &&\r\n      !loading &&\r\n      !loadingTutors &&\r\n      !loadingCoordinators &&\r\n      !loadingDepartmentManagers\r\n    ) {\r\n      return (\r\n        <TableTabScene\r\n          originalRows={originalRows}\r\n          setOriginalRows={setOriginalRows}\r\n          rows={studentsRows}\r\n          setMainRows={setStudentsRows}\r\n          saveButtonColor={saveButtonColor}\r\n          setSaveButtonColor={setSaveButtonColor}\r\n          userStatus={userStatus}\r\n          role={role}\r\n          uid={uid}\r\n          tutors={tutorsRows}\r\n          coordinators={coordinatorsRows}\r\n          departmentManagers={departmentManagersRows}\r\n        />\r\n      );\r\n    } else return null;\r\n  }\r\n\r\n  if (userStatus === 'SignedOut')\r\n    return (\r\n      <div\r\n        style={{\r\n          backgroundColor: '#F9F9F9',\r\n          height: '100vh',\r\n          display: 'flex',\r\n          flexDirection: 'column',\r\n          // backgroundImage: `url(${backG})`,\r\n          // backgroundSize: 'cover',\r\n          // backgroundRepeat: 'no-repeat',\r\n          // backgroundPosition: 'center'\r\n        }}>\r\n        <AppBar>\r\n          <Toolbar style={{ textAlign: 'center' }}>\r\n            <Typography variant=\"h3\" style={{ flexGrow: 1, alignContent: 'center', alignItems: 'center' }} >\r\n              <h3 color=\"inherit\"  > </h3>\r\n            </Typography>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <img\r\n          src={logo}\r\n          style={{\r\n            width: 245,\r\n            height: 128,\r\n            alignSelf: 'flex-end',\r\n            marginRight: 50,\r\n            marginTop: 100\r\n          }}\r\n        />\r\n        <div>\r\n          <StyledFirebaseAuth uiConfig={uiConfig} firebaseAuth={firebase.auth()} />\r\n        </div>\r\n      </div>\r\n    );\r\n  else if (userStatus === 'SignedOutPermissionDenied')\r\n    return (\r\n      <div\r\n        style={{\r\n          backgroundColor: '#F9F9F9',\r\n          height: '100vh',\r\n          display: 'flex',\r\n          flexDirection: 'column',\r\n          // backgroundImage: `url(${backG})`,\r\n          // backgroundSize: 'cover',\r\n          //     backgroundRepeat  : 'no-repeat',\r\n          //  backgroundPosition: 'center'\r\n        }}>\r\n        <AppBar>\r\n          <Toolbar style={{ textAlign: 'center' }}>\r\n            <Typography variant=\"h3\" style={{ flexGrow: 1, alignContent: 'center', alignItems: 'center' }} >\r\n              <h3 color=\"inherit\"  > </h3>\r\n            </Typography>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <img\r\n          src={logo}\r\n          style={{\r\n            width: 245,\r\n            height: 128,\r\n            alignSelf: 'flex-end',\r\n            marginRight: 50,\r\n            marginTop: 100\r\n          }}\r\n        />\r\n        <div>\r\n          <Typography variant=\"h5\" component=\"h5\" style={{ textAlign: 'right', color: 'red' }}>\r\n            !    \r\n          </Typography>\r\n          <StyledFirebaseAuth uiConfig={uiConfig} firebaseAuth={firebase.auth()} />\r\n        </div>\r\n      </div>\r\n    );\r\n  else if (userStatus === 'SignedInCheckingPermissions')\r\n    return (\r\n      <div\r\n        style={{\r\n          display: 'flex',\r\n          height: '100vh',\r\n          alignItems: 'center',\r\n          justifyContent: 'center'\r\n        }}>\r\n        <Loader type=\"Grid\" color=\"#41ad48\" height=\"100\" width=\"100\" />\r\n      </div>\r\n    );\r\n  else {\r\n    const { uid } = firebase.auth().currentUser;\r\n    const { role } = userStatus;\r\n    return (\r\n      <div>\r\n        {saveButtonColor === 'secondary' ? (window.onbeforeunload = popup) : null}\r\n        <div>\r\n          <AppBar\r\n            position=\"static\"\r\n            color=\"default\"\r\n            className={classes.appBar}\r\n            style={{\r\n              flex: 1,\r\n              flexDirection: 'row',\r\n              justifyContent: 'center',\r\n              paddingLeft: 10,\r\n              paddingTop: 7\r\n            }}>\r\n            <Button\r\n              style={{\r\n                marginRight: 'auto',\r\n                fontSize: 18,\r\n                fontWeight: 'bold',\r\n                alignContent: 'center',\r\n                textAlign: 'right',\r\n                color: '#41ad48'\r\n              }}\r\n              size=\"large\"\r\n\r\n              onClick={() => {\r\n                firebase.auth().signOut().then(() => {\r\n                  setUserStatus('SignedOut');\r\n                });\r\n\r\n              }}>\r\n              \r\n            </Button>\r\n            <Tabs\r\n              TabIndicatorProps={{\r\n                style: {\r\n                  backgroundColor: '#41ad48'\r\n                }\r\n              }}\r\n              style={{ marginRight: 'auto' }}\r\n              textColor=\"primary\"\r\n              variant=\"scrollable\"\r\n              scrollButtons=\"auto\"\r\n              value={displayedTab}\r\n              onChange={handleChange}>\r\n              <Tab\r\n                key={0}\r\n                value=\"ReportsTabScene\"\r\n                label={<span className={classes.tabLabel}></span>}\r\n              />\r\n              <Tab\r\n                key={5}\r\n                value=\"ImportFile\"\r\n                label={<span className={classes.tabLabel}> </span>}\r\n              />\r\n              {role === 'ceo' ? (\r\n                <Tab\r\n                  key={1}\r\n                  value=\"DepartmentManagersTabScene\"\r\n                  label={<span className={classes.tabLabel}> </span>}\r\n                />\r\n              ) : null}\r\n              {role === 'departmentManager' || role === 'ceo' ? (\r\n                <Tab\r\n                  key={2}\r\n                  value=\"CoordinatorsTabScene\"\r\n                  label={<span className={classes.tabLabel}></span>}\r\n                />\r\n              ) : null}\r\n              {role !== 'tutor' ? (\r\n                <Tab\r\n                  key={3}\r\n                  value=\"TutorsTabScene\"\r\n                  label={<span className={classes.tabLabel}></span>}\r\n                />\r\n              ) : null}\r\n              <Tab\r\n                key={4}\r\n                value=\"TableTabScene\"\r\n                label={<span className={classes.tabLabel}></span>}\r\n              />\r\n            </Tabs>\r\n\r\n            <img\r\n              src={logo}\r\n              style={{\r\n                width: 124,\r\n                height: 67,\r\n                //alignSelf: 'flex-end',\r\n                marginRight: 70,\r\n                // marginTop: 5\r\n              }}\r\n            />\r\n          </AppBar>\r\n\r\n          {displayedTab === 'TableTabScene' ? (\r\n            <div className={classes.table}>{getAppropriateStudentsRows()}</div>\r\n          ) : null}\r\n\r\n          {displayedTab === 'TutorsTabScene' ? (\r\n            <div className={classes.table}>\r\n              <GenericTab\r\n                originalRows={tutorsOriginalRows}\r\n                setOriginalRows={setTutorsOriginalRows}\r\n                rows={tutorsRows}\r\n                setMainRows={setTutorsRows}\r\n                genericSaveButtonColor={tutorsSaveButtonColor}\r\n                setGenericSaveButtonColor={setTutorsSaveButtonColor}\r\n                type=\"tutors\"\r\n                userStatus={userStatus}\r\n                role={role}\r\n                uid={uid}\r\n              />\r\n            </div>\r\n          ) : null}\r\n\r\n          {displayedTab === 'CoordinatorsTabScene' ? (\r\n            <div className={classes.table}>\r\n              <GenericTab\r\n                originalRows={coordinatorsOriginalRows}\r\n                setOriginalRows={setCoordinatorsOriginalRows}\r\n                rows={coordinatorsRows}\r\n                setMainRows={setCoordinatorsRows}\r\n                genericSaveButtonColor={coordinatorsSaveButtonColor}\r\n                setGenericSaveButtonColor={setCoordinatorsSaveButtonColor}\r\n                type=\"coordinators\"\r\n                userStatus={userStatus}\r\n                role={role}\r\n                uid={uid}\r\n              />\r\n            </div>\r\n          ) : null}\r\n\r\n          {displayedTab === 'DepartmentManagersTabScene' ? (\r\n            <div className={classes.table}>\r\n              <GenericTab\r\n                originalRows={departmentManagersOriginalRows}\r\n                setOriginalRows={setDepartmentManagersOriginalRows}\r\n                rows={departmentManagersRows}\r\n                setMainRows={setDepartmentManagersRows}\r\n                genericSaveButtonColor={departmentManagersSaveButtonColor}\r\n                setGenericSaveButtonColor={setDepartmentManagersSaveButtonColor}\r\n                type=\"departmentManagers\"\r\n                userStatus={userStatus}\r\n                role={role}\r\n                uid={uid}\r\n              />\r\n            </div>\r\n          ) : null}\r\n          {displayedTab === 'ImportFile' ? (\r\n            <div className={classes.table}>\r\n              <Upload\r\n                onNewFile={aooToAdd => {\r\n                  aooToAdd.forEach(student => {\r\n                    const fixedStudent = addOwners(role, uid, userStatus.owners, null, student);\r\n                    firestoreModule\r\n                      .getStudents()\r\n                      .add({ ...fixedStudent, lastModified: new Date() });\r\n                  });\r\n                }}\r\n              />\r\n            </div>\r\n          ) : null}\r\n\r\n          {displayedTab === 'ReportsTabScene' ? (\r\n            <div className={classes.table}>\r\n              {role !== 'tutor' ? <ReportsTabScene tutors={tutorsOriginalRows} />\r\n                : <ReportsTabScene tutor={{\r\n                  fid: firebase.auth().currentUser.uid\r\n                }} />\r\n              }\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n};\r\n\r\nexport default MainScene;\r\n","import * as React from 'react';\nimport { Component } from 'react';\nimport MainScene from './Scenes/MainScene';\nimport './App.css';\n\nclass App extends Component {\n  render() {\n    return <MainScene />;\n  }\n}\n\nexport default App;\n","/* eslint-disable no-console */\n/* eslint-disable no-undef */\n// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nconst root = document.getElementById('root');\nif (root) {\n  ReactDOM.render(<App />, root);\n}\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/tamir_logoshakuf.1dceb69b.png\";"],"sourceRoot":""}